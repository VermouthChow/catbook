  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:10:25.532587', '2020-02-06 17:10:25.532587', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:10:25.532587', '2020-02-06 17:10:25.532587', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 17:10:25.542822', '2020-02-06 17:10:25.542822', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 17:10:25.542822', '2020-02-06 17:10:25.542822', 298486374)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:10:25.549919', '2020-02-06 17:10:25.549919', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:10:25.549919', '2020-02-06 17:10:25.549919', 298486374)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:10:25.557248', '2020-02-06 17:10:25.557248', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:10:25.557248', '2020-02-06 17:10:25.557248', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:10:25.564841', '2020-02-06 17:10:25.564841', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:10:25.564841', '2020-02-06 17:10:25.564841', 298486374)[0m
  [1m[35m (50.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/books" for 127.0.0.1 at 2020-02-07 01:10:25 +0800
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:12:08.376947', '2020-02-06 17:12:08.376947', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:12:08.376947', '2020-02-06 17:12:08.376947', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 17:12:08.383961', '2020-02-06 17:12:08.383961', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 17:12:08.383961', '2020-02-06 17:12:08.383961', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:12:08.389563', '2020-02-06 17:12:08.389563', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:12:08.389563', '2020-02-06 17:12:08.389563', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:12:08.394949', '2020-02-06 17:12:08.394949', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:12:08.394949', '2020-02-06 17:12:08.394949', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:12:08.400338', '2020-02-06 17:12:08.400338', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:12:08.400338', '2020-02-06 17:12:08.400338', 298486374)[0m
  [1m[35m (17.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/books" for 127.0.0.1 at 2020-02-07 01:12:08 +0800
Processing by BooksController#index as HTML
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:12:52.851159', '2020-02-06 17:12:52.851159', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:12:52.851159', '2020-02-06 17:12:52.851159', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 17:12:52.858549', '2020-02-06 17:12:52.858549', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 17:12:52.858549', '2020-02-06 17:12:52.858549', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:12:52.863767', '2020-02-06 17:12:52.863767', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:12:52.863767', '2020-02-06 17:12:52.863767', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:12:52.869178', '2020-02-06 17:12:52.869178', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:12:52.869178', '2020-02-06 17:12:52.869178', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:12:52.875563', '2020-02-06 17:12:52.875563', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:12:52.875563', '2020-02-06 17:12:52.875563', 298486374)[0m
  [1m[35m (20.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/books" for 127.0.0.1 at 2020-02-07 01:12:52 +0800
Processing by BooksController#index as HTML
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:14:12.840795', '2020-02-06 17:14:12.840795', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:14:12.840795', '2020-02-06 17:14:12.840795', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 17:14:12.848525', '2020-02-06 17:14:12.848525', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 17:14:12.848525', '2020-02-06 17:14:12.848525', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:14:12.854230', '2020-02-06 17:14:12.854230', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:14:12.854230', '2020-02-06 17:14:12.854230', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:14:12.859919', '2020-02-06 17:14:12.859919', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:14:12.859919', '2020-02-06 17:14:12.859919', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:14:12.865424', '2020-02-06 17:14:12.865424', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:14:12.865424', '2020-02-06 17:14:12.865424', 298486374)[0m
  [1m[35m (35.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/books" for 127.0.0.1 at 2020-02-07 01:14:13 +0800
Processing by BooksController#index as HTML
Completed 406 Not Acceptable in 8ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:18:08.171490', '2020-02-06 17:18:08.171490', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:18:08.171490', '2020-02-06 17:18:08.171490', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 17:18:08.178323', '2020-02-06 17:18:08.178323', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 17:18:08.178323', '2020-02-06 17:18:08.178323', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:18:08.183999', '2020-02-06 17:18:08.183999', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:18:08.183999', '2020-02-06 17:18:08.183999', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:18:08.189803', '2020-02-06 17:18:08.189803', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:18:08.189803', '2020-02-06 17:18:08.189803', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:18:08.195265', '2020-02-06 17:18:08.195265', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:18:08.195265', '2020-02-06 17:18:08.195265', 298486374)[0m
  [1m[35m (530.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/books" for 127.0.0.1 at 2020-02-07 01:18:08 +0800
Processing by BooksController#index as HTML
Completed 500 Internal Server Error in 39ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:21:10.771946', '2020-02-06 17:21:10.771946', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:21:10.771946', '2020-02-06 17:21:10.771946', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 17:21:10.778852', '2020-02-06 17:21:10.778852', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 17:21:10.778852', '2020-02-06 17:21:10.778852', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:21:10.784369', '2020-02-06 17:21:10.784369', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:21:10.784369', '2020-02-06 17:21:10.784369', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:21:10.789539', '2020-02-06 17:21:10.789539', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:21:10.789539', '2020-02-06 17:21:10.789539', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:21:10.795625', '2020-02-06 17:21:10.795625', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:21:10.795625', '2020-02-06 17:21:10.795625', 298486374)[0m
  [1m[35m (37.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/books" for 127.0.0.1 at 2020-02-07 01:21:10 +0800
Processing by BooksController#index as HTML
Completed 406 Not Acceptable in 8ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:22:40.661244', '2020-02-06 17:22:40.661244', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:22:40.661244', '2020-02-06 17:22:40.661244', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 17:22:40.668117', '2020-02-06 17:22:40.668117', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 17:22:40.668117', '2020-02-06 17:22:40.668117', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:22:40.673634', '2020-02-06 17:22:40.673634', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:22:40.673634', '2020-02-06 17:22:40.673634', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:22:40.679466', '2020-02-06 17:22:40.679466', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:22:40.679466', '2020-02-06 17:22:40.679466', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:22:40.685477', '2020-02-06 17:22:40.685477', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:22:40.685477', '2020-02-06 17:22:40.685477', 298486374)[0m
  [1m[35m (315.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/books" for 127.0.0.1 at 2020-02-07 01:22:41 +0800
Processing by BooksController#index as HTML
Completed 406 Not Acceptable in 8ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:23:15.974651', '2020-02-06 17:23:15.974651', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:23:15.974651', '2020-02-06 17:23:15.974651', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 17:23:15.981660', '2020-02-06 17:23:15.981660', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 17:23:15.981660', '2020-02-06 17:23:15.981660', 298486374)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:23:15.987287', '2020-02-06 17:23:15.987287', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:23:15.987287', '2020-02-06 17:23:15.987287', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:23:15.993185', '2020-02-06 17:23:15.993185', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:23:15.993185', '2020-02-06 17:23:15.993185', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:23:15.999091', '2020-02-06 17:23:15.999091', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:23:15.999091', '2020-02-06 17:23:15.999091', 298486374)[0m
  [1m[35m (746.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/books" for 127.0.0.1 at 2020-02-07 01:23:16 +0800
Processing by BooksController#index as HTML
Completed 406 Not Acceptable in 8ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:25:45.215563', '2020-02-06 17:25:45.215563', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:25:45.215563', '2020-02-06 17:25:45.215563', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 17:25:45.222785', '2020-02-06 17:25:45.222785', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 17:25:45.222785', '2020-02-06 17:25:45.222785', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:25:45.228401', '2020-02-06 17:25:45.228401', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:25:45.228401', '2020-02-06 17:25:45.228401', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:25:45.234014', '2020-02-06 17:25:45.234014', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:25:45.234014', '2020-02-06 17:25:45.234014', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:25:45.239929', '2020-02-06 17:25:45.239929', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:25:45.239929', '2020-02-06 17:25:45.239929', 298486374)[0m
  [1m[35m (299.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/books" for 127.0.0.1 at 2020-02-07 01:25:45 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.builder
  Rendered books/index.json.builder (75.6ms)
Completed 500 Internal Server Error in 81ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:33:44.146172', '2020-02-06 17:33:44.146172', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:33:44.146172', '2020-02-06 17:33:44.146172', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 17:33:44.153065', '2020-02-06 17:33:44.153065', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 17:33:44.153065', '2020-02-06 17:33:44.153065', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:33:44.158512', '2020-02-06 17:33:44.158512', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:33:44.158512', '2020-02-06 17:33:44.158512', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:33:44.164622', '2020-02-06 17:33:44.164622', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:33:44.164622', '2020-02-06 17:33:44.164622', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:33:44.170275', '2020-02-06 17:33:44.170275', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:33:44.170275', '2020-02-06 17:33:44.170275', 298486374)[0m
  [1m[35m (502.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/books" for 127.0.0.1 at 2020-02-07 01:33:44 +0800
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:34:14.632908', '2020-02-06 17:34:14.632908', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:34:14.632908', '2020-02-06 17:34:14.632908', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 17:34:14.639882', '2020-02-06 17:34:14.639882', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 17:34:14.639882', '2020-02-06 17:34:14.639882', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:34:14.645281', '2020-02-06 17:34:14.645281', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:34:14.645281', '2020-02-06 17:34:14.645281', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:34:14.650957', '2020-02-06 17:34:14.650957', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:34:14.650957', '2020-02-06 17:34:14.650957', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:34:14.656738', '2020-02-06 17:34:14.656738', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:34:14.656738', '2020-02-06 17:34:14.656738', 298486374)[0m
  [1m[35m (255.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/books" for 127.0.0.1 at 2020-02-07 01:34:15 +0800
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:37:06.047879', '2020-02-06 17:37:06.047879', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:37:06.047879', '2020-02-06 17:37:06.047879', 298486374)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 17:37:06.054870', '2020-02-06 17:37:06.054870', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 17:37:06.054870', '2020-02-06 17:37:06.054870', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:37:06.060787', '2020-02-06 17:37:06.060787', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:37:06.060787', '2020-02-06 17:37:06.060787', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:37:06.066843', '2020-02-06 17:37:06.066843', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:37:06.066843', '2020-02-06 17:37:06.066843', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:37:06.072503', '2020-02-06 17:37:06.072503', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:37:06.072503', '2020-02-06 17:37:06.072503', 298486374)[0m
  [1m[35m (19.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 01:37:06 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.builder
  Rendered books/index.json.builder (16.9ms)
Completed 500 Internal Server Error in 22ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:39:11.498565', '2020-02-06 17:39:11.498565', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:39:11.498565', '2020-02-06 17:39:11.498565', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 17:39:11.506186', '2020-02-06 17:39:11.506186', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 17:39:11.506186', '2020-02-06 17:39:11.506186', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:39:11.511480', '2020-02-06 17:39:11.511480', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:39:11.511480', '2020-02-06 17:39:11.511480', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:39:11.516752', '2020-02-06 17:39:11.516752', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:39:11.516752', '2020-02-06 17:39:11.516752', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:39:11.522339', '2020-02-06 17:39:11.522339', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:39:11.522339', '2020-02-06 17:39:11.522339', 298486374)[0m
  [1m[35m (553.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 01:39:12 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  Rendered books/index.json.jbuilder (0.2ms)
Completed 200 OK in 6ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:42:14.134070', '2020-02-06 17:42:14.134070', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:42:14.134070', '2020-02-06 17:42:14.134070', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 17:42:14.141049', '2020-02-06 17:42:14.141049', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 17:42:14.141049', '2020-02-06 17:42:14.141049', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:42:14.146660', '2020-02-06 17:42:14.146660', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:42:14.146660', '2020-02-06 17:42:14.146660', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:42:14.152434', '2020-02-06 17:42:14.152434', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:42:14.152434', '2020-02-06 17:42:14.152434', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:42:14.158307', '2020-02-06 17:42:14.158307', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:42:14.158307', '2020-02-06 17:42:14.158307', 298486374)[0m
  [1m[35m (1141.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 01:42:15 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  Rendered books/index.json.jbuilder (0.2ms)
Completed 200 OK in 6ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Load (1.5ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."updated_at" DESC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:43:33.823365', '2020-02-06 17:43:33.823365', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:43:33.823365', '2020-02-06 17:43:33.823365', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 17:43:33.830237', '2020-02-06 17:43:33.830237', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 17:43:33.830237', '2020-02-06 17:43:33.830237', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:43:33.835653', '2020-02-06 17:43:33.835653', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:43:33.835653', '2020-02-06 17:43:33.835653', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:43:33.841195', '2020-02-06 17:43:33.841195', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:43:33.841195', '2020-02-06 17:43:33.841195', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:43:33.847487', '2020-02-06 17:43:33.847487', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:43:33.847487', '2020-02-06 17:43:33.847487', 298486374)[0m
  [1m[35m (13.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 01:43:33 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  Rendered books/index.json.jbuilder (0.2ms)
Completed 200 OK in 6ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:43:56.711690', '2020-02-06 17:43:56.711690', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:43:56.711690', '2020-02-06 17:43:56.711690', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 17:43:56.718750', '2020-02-06 17:43:56.718750', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 17:43:56.718750', '2020-02-06 17:43:56.718750', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:43:56.724217', '2020-02-06 17:43:56.724217', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:43:56.724217', '2020-02-06 17:43:56.724217', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:43:56.729983', '2020-02-06 17:43:56.729983', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:43:56.729983', '2020-02-06 17:43:56.729983', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:43:56.735781', '2020-02-06 17:43:56.735781', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:43:56.735781', '2020-02-06 17:43:56.735781', 298486374)[0m
  [1m[35m (15.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 01:43:56 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  Rendered books/index.json.jbuilder (0.3ms)
Completed 200 OK in 6ms (Views: 2.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:44:25.035179', '2020-02-06 17:44:25.035179', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:44:25.035179', '2020-02-06 17:44:25.035179', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 17:44:25.042018', '2020-02-06 17:44:25.042018', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 17:44:25.042018', '2020-02-06 17:44:25.042018', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:44:25.047557', '2020-02-06 17:44:25.047557', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:44:25.047557', '2020-02-06 17:44:25.047557', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:44:25.053456', '2020-02-06 17:44:25.053456', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:44:25.053456', '2020-02-06 17:44:25.053456', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:44:25.059209', '2020-02-06 17:44:25.059209', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:44:25.059209', '2020-02-06 17:44:25.059209', 298486374)[0m
  [1m[35m (34.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 01:44:30 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  Rendered books/index.json.jbuilder (0.2ms)
Completed 200 OK in 6ms (Views: 1.9ms | ActiveRecord: 0.0ms)
Started GET "/books" for 127.0.0.1 at 2020-02-07 01:44:44 +0800
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 01:44:49 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  Rendered books/index.json.jbuilder (0.1ms)
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:45:20.711348', '2020-02-06 17:45:20.711348', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:45:20.711348', '2020-02-06 17:45:20.711348', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 17:45:20.718274', '2020-02-06 17:45:20.718274', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 17:45:20.718274', '2020-02-06 17:45:20.718274', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:45:20.723735', '2020-02-06 17:45:20.723735', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 17:45:20.723735', '2020-02-06 17:45:20.723735', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:45:20.729468', '2020-02-06 17:45:20.729468', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 17:45:20.729468', '2020-02-06 17:45:20.729468', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:45:20.735430', '2020-02-06 17:45:20.735430', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 17:45:20.735430', '2020-02-06 17:45:20.735430', 298486374)[0m
  [1m[35m (16.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 01:45:23 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  Rendered books/index.json.jbuilder (0.2ms)
Completed 200 OK in 6ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:09:21.787431', '2020-02-06 18:09:21.787431', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:09:21.787431', '2020-02-06 18:09:21.787431', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 18:09:21.794530', '2020-02-06 18:09:21.794530', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 18:09:21.794530', '2020-02-06 18:09:21.794530', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:09:21.799939', '2020-02-06 18:09:21.799939', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:09:21.799939', '2020-02-06 18:09:21.799939', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:09:21.805799', '2020-02-06 18:09:21.805799', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:09:21.805799', '2020-02-06 18:09:21.805799', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:09:21.811390', '2020-02-06 18:09:21.811390', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:09:21.811390', '2020-02-06 18:09:21.811390', 298486374)[0m
  [1m[35m (21.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 02:09:21 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered books/index.json.jbuilder (3.6ms)
Completed 200 OK in 10ms (Views: 4.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:09:34.743133', '2020-02-06 18:09:34.743133', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:09:34.743133', '2020-02-06 18:09:34.743133', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 18:09:34.750578', '2020-02-06 18:09:34.750578', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 18:09:34.750578', '2020-02-06 18:09:34.750578', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:09:34.756061', '2020-02-06 18:09:34.756061', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:09:34.756061', '2020-02-06 18:09:34.756061', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:09:34.761606', '2020-02-06 18:09:34.761606', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:09:34.761606', '2020-02-06 18:09:34.761606', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:09:34.768243', '2020-02-06 18:09:34.768243', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:09:34.768243', '2020-02-06 18:09:34.768243', 298486374)[0m
  [1m[35m (841.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 02:09:35 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered books/index.json.jbuilder (3.6ms)
Completed 200 OK in 9ms (Views: 4.9ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:14:09.457717', '2020-02-06 18:14:09.457717', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:14:09.457717', '2020-02-06 18:14:09.457717', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 18:14:09.465549', '2020-02-06 18:14:09.465549', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 18:14:09.465549', '2020-02-06 18:14:09.465549', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:14:09.471612', '2020-02-06 18:14:09.471612', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:14:09.471612', '2020-02-06 18:14:09.471612', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:14:09.477239', '2020-02-06 18:14:09.477239', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:14:09.477239', '2020-02-06 18:14:09.477239', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:14:09.483588', '2020-02-06 18:14:09.483588', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:14:09.483588', '2020-02-06 18:14:09.483588', 298486374)[0m
  [1m[35m (123.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 02:14:09 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered books/index.json.jbuilder (4.0ms)
Completed 200 OK in 18824ms (Views: 5.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:14:58.220725', '2020-02-06 18:14:58.220725', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:14:58.220725', '2020-02-06 18:14:58.220725', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 18:14:58.227901', '2020-02-06 18:14:58.227901', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 18:14:58.227901', '2020-02-06 18:14:58.227901', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:14:58.233323', '2020-02-06 18:14:58.233323', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:14:58.233323', '2020-02-06 18:14:58.233323', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:14:58.239173', '2020-02-06 18:14:58.239173', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:14:58.239173', '2020-02-06 18:14:58.239173', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:14:58.245303', '2020-02-06 18:14:58.245303', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:14:58.245303', '2020-02-06 18:14:58.245303', 298486374)[0m
  [1m[35m (239.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 02:14:58 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered books/index.json.jbuilder (3.5ms)
Completed 200 OK in 10ms (Views: 5.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:30:55.764356', '2020-02-06 18:30:55.764356', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:30:55.764356', '2020-02-06 18:30:55.764356', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 18:30:55.771315', '2020-02-06 18:30:55.771315', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 18:30:55.771315', '2020-02-06 18:30:55.771315', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:30:55.776796', '2020-02-06 18:30:55.776796', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:30:55.776796', '2020-02-06 18:30:55.776796', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:30:55.781930', '2020-02-06 18:30:55.781930', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:30:55.781930', '2020-02-06 18:30:55.781930', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:30:55.788232', '2020-02-06 18:30:55.788232', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:30:55.788232', '2020-02-06 18:30:55.788232', 298486374)[0m
  [1m[35m (17.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 02:30:55 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered books/index.json.jbuilder (3.7ms)
Completed 200 OK in 9ms (Views: 5.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:32:14.812851', '2020-02-06 18:32:14.812851', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:32:14.812851', '2020-02-06 18:32:14.812851', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 18:32:14.820251', '2020-02-06 18:32:14.820251', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 18:32:14.820251', '2020-02-06 18:32:14.820251', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:32:14.825733', '2020-02-06 18:32:14.825733', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:32:14.825733', '2020-02-06 18:32:14.825733', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:32:14.831773', '2020-02-06 18:32:14.831773', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:32:14.831773', '2020-02-06 18:32:14.831773', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:32:14.837532', '2020-02-06 18:32:14.837532', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:32:14.837532', '2020-02-06 18:32:14.837532', 298486374)[0m
  [1m[35m (37.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 02:32:14 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered books/index.json.jbuilder (3.9ms)
Completed 200 OK in 10ms (Views: 5.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:33:21.947537', '2020-02-06 18:33:21.947537', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:33:21.947537', '2020-02-06 18:33:21.947537', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 18:33:21.954404', '2020-02-06 18:33:21.954404', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 18:33:21.954404', '2020-02-06 18:33:21.954404', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:33:21.959912', '2020-02-06 18:33:21.959912', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:33:21.959912', '2020-02-06 18:33:21.959912', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:33:21.966131', '2020-02-06 18:33:21.966131', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:33:21.966131', '2020-02-06 18:33:21.966131', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:33:21.972241', '2020-02-06 18:33:21.972241', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:33:21.972241', '2020-02-06 18:33:21.972241', 298486374)[0m
  [1m[35m (397.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 02:33:22 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered books/index.json.jbuilder (7651.1ms)
Completed 200 OK in 7658ms (Views: 7652.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:34:28.449375', '2020-02-06 18:34:28.449375', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:34:28.449375', '2020-02-06 18:34:28.449375', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 18:34:28.457228', '2020-02-06 18:34:28.457228', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 18:34:28.457228', '2020-02-06 18:34:28.457228', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:34:28.463073', '2020-02-06 18:34:28.463073', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:34:28.463073', '2020-02-06 18:34:28.463073', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:34:28.468533', '2020-02-06 18:34:28.468533', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:34:28.468533', '2020-02-06 18:34:28.468533', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:34:28.474395', '2020-02-06 18:34:28.474395', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:34:28.474395', '2020-02-06 18:34:28.474395', 298486374)[0m
  [1m[35m (97.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 02:34:28 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered books/index.json.jbuilder (3.7ms)
Completed 200 OK in 10ms (Views: 5.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:34:42.304024', '2020-02-06 18:34:42.304024', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:34:42.304024', '2020-02-06 18:34:42.304024', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 18:34:42.311291', '2020-02-06 18:34:42.311291', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 18:34:42.311291', '2020-02-06 18:34:42.311291', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:34:42.316645', '2020-02-06 18:34:42.316645', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:34:42.316645', '2020-02-06 18:34:42.316645', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:34:42.322111', '2020-02-06 18:34:42.322111', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:34:42.322111', '2020-02-06 18:34:42.322111', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:34:42.328821', '2020-02-06 18:34:42.328821', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:34:42.328821', '2020-02-06 18:34:42.328821', 298486374)[0m
  [1m[35m (20.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 02:34:42 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered books/index.json.jbuilder (3.7ms)
Completed 200 OK in 9ms (Views: 4.9ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:35:55.068246', '2020-02-06 18:35:55.068246', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:35:55.068246', '2020-02-06 18:35:55.068246', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 18:35:55.075208', '2020-02-06 18:35:55.075208', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 18:35:55.075208', '2020-02-06 18:35:55.075208', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:35:55.080749', '2020-02-06 18:35:55.080749', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:35:55.080749', '2020-02-06 18:35:55.080749', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:35:55.086524', '2020-02-06 18:35:55.086524', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:35:55.086524', '2020-02-06 18:35:55.086524', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:35:55.092764', '2020-02-06 18:35:55.092764', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:35:55.092764', '2020-02-06 18:35:55.092764', 298486374)[0m
  [1m[35m (908.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 02:35:56 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered books/index.json.jbuilder (3.8ms)
Completed 200 OK in 10ms (Views: 5.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:36:34.779161', '2020-02-06 18:36:34.779161', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:36:34.779161', '2020-02-06 18:36:34.779161', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 18:36:34.786103', '2020-02-06 18:36:34.786103', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 18:36:34.786103', '2020-02-06 18:36:34.786103', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:36:34.791638', '2020-02-06 18:36:34.791638', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 18:36:34.791638', '2020-02-06 18:36:34.791638', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:36:34.797304', '2020-02-06 18:36:34.797304', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 18:36:34.797304', '2020-02-06 18:36:34.797304', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:36:34.803504', '2020-02-06 18:36:34.803504', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 18:36:34.803504', '2020-02-06 18:36:34.803504', 298486374)[0m
  [1m[35m (182.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 02:36:35 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered books/index.json.jbuilder (3.6ms)
Completed 200 OK in 9ms (Views: 4.8ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (724.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "catbook_test"[0m
  [1m[35m (1124.6ms)[0m  [1m[35mCREATE DATABASE "catbook_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35mSQL (36.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "btree_gin"[0m
  [1m[35mSQL (84.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "btree_gist"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "books" CASCADE[0m
  [1m[35m (106.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" bigserial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "books_words" CASCADE[0m
  [1m[35m (21.5ms)[0m  [1m[35mCREATE TABLE "books_words" ("book_id" bigint, "word_id" bigint)[0m
  [1m[35m (75.1ms)[0m  [1m[35mCREATE  INDEX  "index_books_words_on_book_id" ON "books_words"  ("book_id")[0m
  [1m[35m (65.4ms)[0m  [1m[35mCREATE  INDEX  "index_books_words_on_word_id" ON "books_words"  ("word_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "learn_notes" CASCADE[0m
  [1m[35m (74.0ms)[0m  [1m[35mCREATE TABLE "learn_notes" ("id" bigserial primary key, "status" integer, "user_id" integer, "word_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (65.6ms)[0m  [1m[35mCREATE  INDEX  "index_learn_notes_on_status" ON "learn_notes"  ("status")[0m
  [1m[35m (65.3ms)[0m  [1m[35mCREATE  INDEX  "index_learn_notes_on_user_id" ON "learn_notes"  ("user_id")[0m
  [1m[35m (389.0ms)[0m  [1m[35mCREATE  INDEX  "index_learn_notes_on_word_id" ON "learn_notes"  ("word_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "notebooks" CASCADE[0m
  [1m[35m (67.6ms)[0m  [1m[35mCREATE TABLE "notebooks" ("id" bigserial primary key, "status" integer, "user_id" integer, "word_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (65.3ms)[0m  [1m[35mCREATE  INDEX  "index_notebooks_on_status" ON "notebooks"  ("status")[0m
  [1m[35m (65.5ms)[0m  [1m[35mCREATE  INDEX  "index_notebooks_on_user_id" ON "notebooks"  ("user_id")[0m
  [1m[35m (65.4ms)[0m  [1m[35mCREATE  INDEX  "index_notebooks_on_word_id" ON "notebooks"  ("word_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (124.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying, "password" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (65.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "words" CASCADE[0m
  [1m[35m (213.6ms)[0m  [1m[35mCREATE TABLE "words" ("id" bigserial primary key, "name_a" character varying, "name_b" character varying, "sounds_a" character varying, "sounds_b" character varying, "explanation" text, "example" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (30.1ms)[0m  [1m[35mCREATE  INDEX  "index_words_on_name_a" ON "words" USING gin ("name_a")[0m
  [1m[35m (19.3ms)[0m  [1m[35mCREATE  INDEX  "index_words_on_name_b" ON "words" USING gin ("name_b")[0m
  [1m[35m (129.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (57.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200206160916)[0m
  [1m[35m (22.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20200206154827),
(20200206133218),
(20200206155924),
(20200206160854),
(20200206160443),
(20200206155428);

[0m
  [1m[35m (133.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2020-02-06 20:02:25.686474"], ["updated_at", "2020-02-06 20:02:25.686474"]]
  [1m[35m (24.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 20:02:25.774001', '2020-02-06 20:02:25.774001', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 20:02:25.774001', '2020-02-06 20:02:25.774001', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 20:02:25.781524', '2020-02-06 20:02:25.781524', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 20:02:25.781524', '2020-02-06 20:02:25.781524', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 20:02:25.787851', '2020-02-06 20:02:25.787851', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 20:02:25.787851', '2020-02-06 20:02:25.787851', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 20:02:25.794121', '2020-02-06 20:02:25.794121', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', NULL, 'MyString', 'MyText', 'MyText', '2020-02-06 20:02:25.794121', '2020-02-06 20:02:25.794121', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 20:02:25.800132', '2020-02-06 20:02:25.800132', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 20:02:25.800132', '2020-02-06 20:02:25.800132', 298486374)[0m
  [1m[35m (19.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 04:02:25 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" WHERE "books_words"."book_id" = $1[0m  [["book_id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" WHERE "books_words"."book_id" = $1[0m  [["book_id", 298486374]]
  Rendered books/index.json.jbuilder (14.6ms)
Completed 200 OK in 20ms (Views: 15.1ms | ActiveRecord: 1.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 20:14:48.007432', '2020-02-06 20:14:48.007432', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 20:14:48.007432', '2020-02-06 20:14:48.007432', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 20:14:48.015259', '2020-02-06 20:14:48.015259', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 20:14:48.015259', '2020-02-06 20:14:48.015259', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 20:14:48.020815', '2020-02-06 20:14:48.020815', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 20:14:48.020815', '2020-02-06 20:14:48.020815', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 20:14:48.026249', '2020-02-06 20:14:48.026249', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 20:14:48.026249', '2020-02-06 20:14:48.026249', 268784245)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 20:14:48.026249', '2020-02-06 20:14:48.026249', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 20:14:48.032987', '2020-02-06 20:14:48.032987', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 20:14:48.032987', '2020-02-06 20:14:48.032987', 298486374)[0m
  [1m[35m (302.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 20:16:23.943276', '2020-02-06 20:16:23.943276', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 20:16:23.943276', '2020-02-06 20:16:23.943276', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 20:16:23.950288', '2020-02-06 20:16:23.950288', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 20:16:23.950288', '2020-02-06 20:16:23.950288', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 20:16:23.955593', '2020-02-06 20:16:23.955593', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 20:16:23.955593', '2020-02-06 20:16:23.955593', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 20:16:23.961223', '2020-02-06 20:16:23.961223', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 20:16:23.961223', '2020-02-06 20:16:23.961223', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 20:16:23.961223', '2020-02-06 20:16:23.961223', 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 20:16:23.967891', '2020-02-06 20:16:23.967891', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 20:16:23.967891', '2020-02-06 20:16:23.967891', 298486374)[0m
  [1m[35m (158.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 04:16:24 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.4ms)
Completed 200 OK in 13ms (Views: 8.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 20:18:01.325057', '2020-02-06 20:18:01.325057', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 20:18:01.325057', '2020-02-06 20:18:01.325057', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 20:18:01.331944', '2020-02-06 20:18:01.331944', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 20:18:01.331944', '2020-02-06 20:18:01.331944', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 20:18:01.337361', '2020-02-06 20:18:01.337361', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 20:18:01.337361', '2020-02-06 20:18:01.337361', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 20:18:01.343908', '2020-02-06 20:18:01.343908', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 20:18:01.343908', '2020-02-06 20:18:01.343908', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 20:18:01.343908', '2020-02-06 20:18:01.343908', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 20:18:01.350053', '2020-02-06 20:18:01.350053', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES (NULL, 'MyString', '2020-02-06 20:18:01.350053', '2020-02-06 20:18:01.350053', 298486374)[0m
  [1m[35m (319.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 04:18:01 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.5ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.4ms)
Completed 200 OK in 13ms (Views: 7.9ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:34:54.472742', '2020-02-06 21:34:54.472742', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:34:54.472742', '2020-02-06 21:34:54.472742', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:34:54.479786', '2020-02-06 21:34:54.479786', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:34:54.479786', '2020-02-06 21:34:54.479786', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 21:34:54.485267', '2020-02-06 21:34:54.485267', 524266083, 980190962, 38946494)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 21:34:54.485267', '2020-02-06 21:34:54.485267', 882484985, 980190962, 703875630)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:34:54.490509', '2020-02-06 21:34:54.490509', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:34:54.490509', '2020-02-06 21:34:54.490509', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:34:54.490509', '2020-02-06 21:34:54.490509', 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:34:54.497725', '2020-02-06 21:34:54.497725', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:34:54.497725', '2020-02-06 21:34:54.497725', 298486374)[0m
  [1m[35m (17.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:34:54 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.4ms)
Completed 200 OK in 13ms (Views: 8.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:40:31.108398', '2020-02-06 21:40:31.108398', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:40:31.108398', '2020-02-06 21:40:31.108398', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:40:31.115351', '2020-02-06 21:40:31.115351', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:40:31.115351', '2020-02-06 21:40:31.115351', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, 1, '2020-02-06 21:40:31.120953', 524266083, 980190962, 38946494)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:40:31.129767', '2020-02-06 21:40:31.129767', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:40:31.129767', '2020-02-06 21:40:31.129767', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:40:31.132795', '2020-02-06 21:40:31.132795', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:40:31.132795', '2020-02-06 21:40:31.132795', 548926451)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, 1, '2020-02-06 21:40:31.135487', 524266083, 980190962, 38946494)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:41:13.200482', '2020-02-06 21:41:13.200482', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:41:13.200482', '2020-02-06 21:41:13.200482', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:41:13.207493', '2020-02-06 21:41:13.207493', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:41:13.207493', '2020-02-06 21:41:13.207493', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 21:41:13.213004', 524266083, 980190962, 38946494)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:41:13.213004', 882484985, 980190962, 703875630)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:41:13.218950', '2020-02-06 21:41:13.218950', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:41:13.218950', '2020-02-06 21:41:13.218950', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:41:13.218950', '2020-02-06 21:41:13.218950', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:41:13.225085', '2020-02-06 21:41:13.225085', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:41:13.225085', '2020-02-06 21:41:13.225085', 298486374)[0m
  [1m[35m (41.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:41:13 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.3ms)
Completed 200 OK in 13ms (Views: 8.0ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:41:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1')) LIMIT $1[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 16ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:42:53.912143', '2020-02-06 21:42:53.912143', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:42:53.912143', '2020-02-06 21:42:53.912143', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:42:53.919777', '2020-02-06 21:42:53.919777', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:42:53.919777', '2020-02-06 21:42:53.919777', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 21:42:53.925764', 524266083, 980190962, 38946494)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:42:53.925764', 882484985, 980190962, 703875630)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:42:53.931666', '2020-02-06 21:42:53.931666', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:42:53.931666', '2020-02-06 21:42:53.931666', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:42:53.931666', '2020-02-06 21:42:53.931666', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:42:53.938317', '2020-02-06 21:42:53.938317', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:42:53.938317', '2020-02-06 21:42:53.938317', 298486374)[0m
  [1m[35m (22.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:42:54 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.2ms)
Completed 200 OK in 13ms (Views: 8.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:42:54 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:43:18.732253', '2020-02-06 21:43:18.732253', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:43:18.732253', '2020-02-06 21:43:18.732253', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:43:18.739282', '2020-02-06 21:43:18.739282', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:43:18.739282', '2020-02-06 21:43:18.739282', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 21:43:18.744851', 524266083, 980190962, 38946494)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:43:18.744851', 882484985, 980190962, 703875630)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:43:18.750568', '2020-02-06 21:43:18.750568', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:43:18.750568', '2020-02-06 21:43:18.750568', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:43:18.750568', '2020-02-06 21:43:18.750568', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:43:18.757493', '2020-02-06 21:43:18.757493', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:43:18.757493', '2020-02-06 21:43:18.757493', 298486374)[0m
  [1m[35m (613.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:43:19 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.3ms)
Completed 200 OK in 13ms (Views: 8.0ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:43:19 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?bookId=%23%3CBook%3A0x000055ac34a2b260%3E" for 127.0.0.1 at 2020-02-07 05:43:19 +0800
Processing by WordsController#index as JSON
  Parameters: {"bookId"=>"#<Book:0x000055ac34a2b260>"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.6ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_b LIKE '%%' OR name_b LIKE '%%') ORDER BY CASE WHEN name_a = '' THEN 1 WHEN name_b = '' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.5ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:47:45.680560', '2020-02-06 21:47:45.680560', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:47:45.680560', '2020-02-06 21:47:45.680560', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:47:45.687754', '2020-02-06 21:47:45.687754', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:47:45.687754', '2020-02-06 21:47:45.687754', 548926451)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 21:47:45.693386', 524266083, 980190962, 38946494)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:47:45.693386', 882484985, 980190962, 703875630)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:47:45.699623', '2020-02-06 21:47:45.699623', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:47:45.699623', '2020-02-06 21:47:45.699623', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:47:45.699623', '2020-02-06 21:47:45.699623', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:47:45.705841', '2020-02-06 21:47:45.705841', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:47:45.705841', '2020-02-06 21:47:45.705841', 298486374)[0m
  [1m[35m (660.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:47:46 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?bookId=%23%3CBook%3A0x000056537315abe0%3E" for 127.0.0.1 at 2020-02-07 05:47:46 +0800
Processing by WordsController#index as JSON
  Parameters: {"bookId"=>"#<Book:0x000056537315abe0>"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_b LIKE '%%' OR name_b LIKE '%%') ORDER BY CASE WHEN name_a = '' THEN 1 WHEN name_b = '' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.4ms)
Completed 200 OK in 5ms (Views: 2.7ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:47:46 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.4ms)
Completed 200 OK in 9ms (Views: 7.1ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:48:30.262911', '2020-02-06 21:48:30.262911', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:48:30.262911', '2020-02-06 21:48:30.262911', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:48:30.271323', '2020-02-06 21:48:30.271323', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:48:30.271323', '2020-02-06 21:48:30.271323', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 21:48:30.276982', 524266083, 980190962, 38946494)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:48:30.276982', 882484985, 980190962, 703875630)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:48:30.282557', '2020-02-06 21:48:30.282557', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:48:30.282557', '2020-02-06 21:48:30.282557', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:48:30.282557', '2020-02-06 21:48:30.282557', 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:48:30.289327', '2020-02-06 21:48:30.289327', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:48:30.289327', '2020-02-06 21:48:30.289327', 298486374)[0m
  [1m[35m (20.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:48:30 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?bookId=%23%3CBook%3A0x0000555d7a2c4ca0%3E" for 127.0.0.1 at 2020-02-07 05:48:30 +0800
Processing by WordsController#index as JSON
  Parameters: {"bookId"=>"#<Book:0x0000555d7a2c4ca0>"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_b LIKE '%%' OR name_b LIKE '%%') ORDER BY CASE WHEN name_a = '' THEN 1 WHEN name_b = '' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.2ms)
Completed 200 OK in 5ms (Views: 2.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:48:30 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.5ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (8.4ms)
Completed 200 OK in 10ms (Views: 7.8ms | ActiveRecord: 1.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:48:49.672133', '2020-02-06 21:48:49.672133', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:48:49.672133', '2020-02-06 21:48:49.672133', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:48:49.679033', '2020-02-06 21:48:49.679033', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:48:49.679033', '2020-02-06 21:48:49.679033', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 21:48:49.684588', 524266083, 980190962, 38946494)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:48:49.684588', 882484985, 980190962, 703875630)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:48:49.690137', '2020-02-06 21:48:49.690137', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:48:49.690137', '2020-02-06 21:48:49.690137', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:48:49.690137', '2020-02-06 21:48:49.690137', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:48:49.696967', '2020-02-06 21:48:49.696967', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:48:49.696967', '2020-02-06 21:48:49.696967', 298486374)[0m
  [1m[35m (475.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:48:50 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.3ms)
Completed 200 OK in 13ms (Views: 8.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:48:50 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?bookId=%23%3CBook%3A0x0000559a2b1e18b8%3E" for 127.0.0.1 at 2020-02-07 05:48:50 +0800
Processing by WordsController#index as JSON
  Parameters: {"bookId"=>"#<Book:0x0000559a2b1e18b8>"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_b LIKE '%%' OR name_b LIKE '%%') ORDER BY CASE WHEN name_a = '' THEN 1 WHEN name_b = '' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.1ms)
Completed 200 OK in 4ms (Views: 1.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:49:05.912672', '2020-02-06 21:49:05.912672', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:49:05.912672', '2020-02-06 21:49:05.912672', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:49:05.919662', '2020-02-06 21:49:05.919662', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:49:05.919662', '2020-02-06 21:49:05.919662', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 21:49:05.925472', 524266083, 980190962, 38946494)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:49:05.925472', 882484985, 980190962, 703875630)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:49:05.931125', '2020-02-06 21:49:05.931125', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:49:05.931125', '2020-02-06 21:49:05.931125', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:49:05.931125', '2020-02-06 21:49:05.931125', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:49:05.937492', '2020-02-06 21:49:05.937492', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:49:05.937492', '2020-02-06 21:49:05.937492', 298486374)[0m
  [1m[35m (447.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:49:06 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?bookId=%23%3CBook%3A0x0000563760ba67e0%3E" for 127.0.0.1 at 2020-02-07 05:49:06 +0800
Processing by WordsController#index as JSON
  Parameters: {"bookId"=>"#<Book:0x0000563760ba67e0>"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_b LIKE '%%' OR name_b LIKE '%%') ORDER BY CASE WHEN name_a = '' THEN 1 WHEN name_b = '' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.2ms)
Completed 200 OK in 5ms (Views: 2.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:49:06 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.2ms)
Completed 200 OK in 8ms (Views: 6.7ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:49:38.967161', '2020-02-06 21:49:38.967161', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:49:38.967161', '2020-02-06 21:49:38.967161', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:49:38.974121', '2020-02-06 21:49:38.974121', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:49:38.974121', '2020-02-06 21:49:38.974121', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:49:38.979508', 882484985, 980190962, 703875630)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:49:38.985205', '2020-02-06 21:49:38.985205', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:49:38.985205', '2020-02-06 21:49:38.985205', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:49:38.985205', '2020-02-06 21:49:38.985205', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:49:38.991552', '2020-02-06 21:49:38.991552', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:49:38.991552', '2020-02-06 21:49:38.991552', 298486374)[0m
  [1m[35m (59.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:49:39 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?bookId=%23%3CBook%3A0x0000555a1681f400%3E" for 127.0.0.1 at 2020-02-07 05:49:39 +0800
Processing by WordsController#index as JSON
  Parameters: {"bookId"=>"#<Book:0x0000555a1681f400>"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_b LIKE '%%' OR name_b LIKE '%%') ORDER BY CASE WHEN name_a = '' THEN 1 WHEN name_b = '' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.2ms)
Completed 200 OK in 5ms (Views: 2.5ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:49:39 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (8.1ms)
Completed 200 OK in 9ms (Views: 7.7ms | ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:50:13.274261', '2020-02-06 21:50:13.274261', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:50:13.274261', '2020-02-06 21:50:13.274261', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:50:13.281606', '2020-02-06 21:50:13.281606', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:50:13.281606', '2020-02-06 21:50:13.281606', 548926451)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 21:50:13.287200', 524266083, 980190962, 38946494)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:50:13.287200', 882484985, 980190962, 703875630)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:50:13.293238', '2020-02-06 21:50:13.293238', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:50:13.293238', '2020-02-06 21:50:13.293238', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:50:13.293238', '2020-02-06 21:50:13.293238', 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:50:13.299270', '2020-02-06 21:50:13.299270', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:50:13.299270', '2020-02-06 21:50:13.299270', 298486374)[0m
  [1m[35m (211.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:50:13 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.3ms)
Completed 200 OK in 13ms (Views: 8.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:50:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?bookId=%23%3CBook%3A0x0000556af928d818%3E" for 127.0.0.1 at 2020-02-07 05:50:13 +0800
Processing by WordsController#index as JSON
  Parameters: {"bookId"=>"#<Book:0x0000556af928d818>"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_b LIKE '%%' OR name_b LIKE '%%') ORDER BY CASE WHEN name_a = '' THEN 1 WHEN name_b = '' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.2ms)
Completed 200 OK in 4ms (Views: 1.3ms | ActiveRecord: 0.7ms)
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes"[0m
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (1.2ms)[0m  [1m[34mSELECT "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 298486374 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.5ms)[0m  [1m[34mSELECT "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 298486374 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at DESC[0m  [["book_id", 185728873]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.5ms)[0m  [1m[34mSELECT "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 298486374 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at DESC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:55:39.056583', '2020-02-06 21:55:39.056583', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:55:39.056583', '2020-02-06 21:55:39.056583', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:55:39.063686', '2020-02-06 21:55:39.063686', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:55:39.063686', '2020-02-06 21:55:39.063686', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 21:55:39.069205', 524266083, 980190962, 703875630)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:55:39.069205', 882484985, 980190962, 410440501)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:55:39.075190', '2020-02-06 21:55:39.075190', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:55:39.075190', '2020-02-06 21:55:39.075190', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:55:39.075190', '2020-02-06 21:55:39.075190', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:55:39.081437', '2020-02-06 21:55:39.081437', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:55:39.081437', '2020-02-06 21:55:39.081437', 298486374)[0m
  [1m[35m (14.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:55:39 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.3ms)
Completed 200 OK in 13ms (Views: 7.9ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:55:39 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?bookId=%23%3CBook%3A0x0000563dbd3dcb00%3E" for 127.0.0.1 at 2020-02-07 05:55:39 +0800
Processing by WordsController#index as JSON
  Parameters: {"bookId"=>"#<Book:0x0000563dbd3dcb00>"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_b LIKE '%%' OR name_b LIKE '%%') ORDER BY CASE WHEN name_a = '' THEN 1 WHEN name_b = '' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.1ms)
Completed 200 OK in 4ms (Views: 1.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:56:05.835499', '2020-02-06 21:56:05.835499', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:56:05.835499', '2020-02-06 21:56:05.835499', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:56:05.841931', '2020-02-06 21:56:05.841931', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:56:05.841931', '2020-02-06 21:56:05.841931', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 21:56:05.846799', 524266083, 980190962, 703875630)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:56:05.846799', 882484985, 980190962, 410440501)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:56:05.851986', '2020-02-06 21:56:05.851986', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:56:05.851986', '2020-02-06 21:56:05.851986', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:56:05.851986', '2020-02-06 21:56:05.851986', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:56:05.857886', '2020-02-06 21:56:05.857886', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:56:05.857886', '2020-02-06 21:56:05.857886', 298486374)[0m
  [1m[35m (645.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:56:06 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.6ms)
Completed 200 OK in 13ms (Views: 8.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:56:06 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?bookId=%23%3CBook%3A0x000055a1bcf1ef10%3E" for 127.0.0.1 at 2020-02-07 05:56:06 +0800
Processing by WordsController#index as JSON
  Parameters: {"bookId"=>"#<Book:0x000055a1bcf1ef10>"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_b LIKE '%%' OR name_b LIKE '%%') ORDER BY CASE WHEN name_a = '' THEN 1 WHEN name_b = '' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.1ms)
Completed 200 OK in 4ms (Views: 1.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:56:47.152788', '2020-02-06 21:56:47.152788', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:56:47.152788', '2020-02-06 21:56:47.152788', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:56:47.159933', '2020-02-06 21:56:47.159933', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:56:47.159933', '2020-02-06 21:56:47.159933', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 21:56:47.165358', 524266083, 980190962, 703875630)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:56:47.165358', 882484985, 980190962, 410440501)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:56:47.170911', '2020-02-06 21:56:47.170911', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:56:47.170911', '2020-02-06 21:56:47.170911', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:56:47.170911', '2020-02-06 21:56:47.170911', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:56:47.177096', '2020-02-06 21:56:47.177096', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:56:47.177096', '2020-02-06 21:56:47.177096', 298486374)[0m
  [1m[35m (441.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:56:47 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?bookId=%23%3CBook%3A0x000055dff63c6be0%3E" for 127.0.0.1 at 2020-02-07 05:56:47 +0800
Processing by WordsController#index as JSON
  Parameters: {"bookId"=>"#<Book:0x000055dff63c6be0>"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_b LIKE '%%' OR name_b LIKE '%%') ORDER BY CASE WHEN name_a = '' THEN 1 WHEN name_b = '' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.2ms)
Completed 200 OK in 5ms (Views: 2.4ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:56:47 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.6ms)
Completed 200 OK in 9ms (Views: 7.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:57:00.708953', '2020-02-06 21:57:00.708953', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:57:00.708953', '2020-02-06 21:57:00.708953', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:57:00.716262', '2020-02-06 21:57:00.716262', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:57:00.716262', '2020-02-06 21:57:00.716262', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 21:57:00.722249', 524266083, 980190962, 703875630)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:57:00.722249', 882484985, 980190962, 410440501)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:57:00.728457', '2020-02-06 21:57:00.728457', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:57:00.728457', '2020-02-06 21:57:00.728457', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:57:00.728457', '2020-02-06 21:57:00.728457', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:57:00.734567', '2020-02-06 21:57:00.734567', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:57:00.734567', '2020-02-06 21:57:00.734567', 298486374)[0m
  [1m[35m (873.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:57:01 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?bookId=%23%3CBook%3A0x0000562873c1fb28%3E" for 127.0.0.1 at 2020-02-07 05:57:01 +0800
Processing by WordsController#index as JSON
  Parameters: {"bookId"=>"#<Book:0x0000562873c1fb28>"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_b LIKE '%%' OR name_b LIKE '%%') ORDER BY CASE WHEN name_a = '' THEN 1 WHEN name_b = '' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.2ms)
Completed 200 OK in 5ms (Views: 2.4ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:57:01 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (8.0ms)
Completed 200 OK in 9ms (Views: 7.5ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:57:26.905935', '2020-02-06 21:57:26.905935', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:57:26.905935', '2020-02-06 21:57:26.905935', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:57:26.912907', '2020-02-06 21:57:26.912907', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:57:26.912907', '2020-02-06 21:57:26.912907', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 21:57:26.918158', 524266083, 980190962, 703875630)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:57:26.918158', 882484985, 980190962, 410440501)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:57:26.923686', '2020-02-06 21:57:26.923686', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:57:26.923686', '2020-02-06 21:57:26.923686', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:57:26.923686', '2020-02-06 21:57:26.923686', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:57:26.929654', '2020-02-06 21:57:26.929654', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:57:26.929654', '2020-02-06 21:57:26.929654', 298486374)[0m
  [1m[35m (606.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:57:27 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.4ms)
Completed 200 OK in 13ms (Views: 8.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:57:27 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?bookId=%23%3CBook%3A0x000055f9964d6f58%3E" for 127.0.0.1 at 2020-02-07 05:57:27 +0800
Processing by WordsController#index as JSON
  Parameters: {"bookId"=>"#<Book:0x000055f9964d6f58>"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_b LIKE '%%' OR name_b LIKE '%%') ORDER BY CASE WHEN name_a = '' THEN 1 WHEN name_b = '' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.2ms)
Completed 200 OK in 4ms (Views: 1.4ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:58:02.877996', '2020-02-06 21:58:02.877996', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:58:02.877996', '2020-02-06 21:58:02.877996', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:58:02.885004', '2020-02-06 21:58:02.885004', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:58:02.885004', '2020-02-06 21:58:02.885004', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 21:58:02.890589', 524266083, 980190962, 703875630)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:58:02.890589', 882484985, 980190962, 410440501)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:58:02.896440', '2020-02-06 21:58:02.896440', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:58:02.896440', '2020-02-06 21:58:02.896440', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:58:02.896440', '2020-02-06 21:58:02.896440', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:58:02.902691', '2020-02-06 21:58:02.902691', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:58:02.902691', '2020-02-06 21:58:02.902691', 298486374)[0m
  [1m[35m (156.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:58:03 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?bookId=%23%3CBook%3A0x000055f40b71eb70%3E" for 127.0.0.1 at 2020-02-07 05:58:03 +0800
Processing by WordsController#index as JSON
  Parameters: {"bookId"=>"#<Book:0x000055f40b71eb70>"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (1.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_b LIKE '%%' OR name_b LIKE '%%') ORDER BY CASE WHEN name_a = '' THEN 1 WHEN name_b = '' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (4.3ms)
Completed 200 OK in 6499ms (Views: 10.1ms | ActiveRecord: 1.5ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.5ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:58:09 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (9.4ms)
Completed 200 OK in 11ms (Views: 9.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:58:27.996881', '2020-02-06 21:58:27.996881', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:58:27.996881', '2020-02-06 21:58:27.996881', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:58:28.004010', '2020-02-06 21:58:28.004010', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:58:28.004010', '2020-02-06 21:58:28.004010', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 21:58:28.009602', 524266083, 980190962, 703875630)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:58:28.009602', 882484985, 980190962, 410440501)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:58:28.015633', '2020-02-06 21:58:28.015633', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:58:28.015633', '2020-02-06 21:58:28.015633', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:58:28.015633', '2020-02-06 21:58:28.015633', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:58:28.021946', '2020-02-06 21:58:28.021946', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:58:28.021946', '2020-02-06 21:58:28.021946', 298486374)[0m
  [1m[35m (13.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:58:28 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=%23%3CBook%3A0x000056342d4cfba0%3E" for 127.0.0.1 at 2020-02-07 05:58:28 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"#<Book:0x000056342d4cfba0>"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Completed 404 Not Found in 3590ms (ActiveRecord: 1.0ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:58:31 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (8.9ms)
Completed 200 OK in 11ms (Views: 9.4ms | ActiveRecord: 1.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:58:54.506281', '2020-02-06 21:58:54.506281', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:58:54.506281', '2020-02-06 21:58:54.506281', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:58:54.513235', '2020-02-06 21:58:54.513235', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:58:54.513235', '2020-02-06 21:58:54.513235', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 21:58:54.518722', 524266083, 980190962, 703875630)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:58:54.518722', 882484985, 980190962, 410440501)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:58:54.524586', '2020-02-06 21:58:54.524586', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:58:54.524586', '2020-02-06 21:58:54.524586', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:58:54.524586', '2020-02-06 21:58:54.524586', 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:58:54.530780', '2020-02-06 21:58:54.530780', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:58:54.530780', '2020-02-06 21:58:54.530780', 298486374)[0m
  [1m[35m (53.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:58:54 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (8.0ms)
Completed 200 OK in 14ms (Views: 8.7ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:58:54 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 05:58:54 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.7ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (3.9ms)
Completed 200 OK in 8ms (Views: 3.8ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:59:10.422291', '2020-02-06 21:59:10.422291', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:59:10.422291', '2020-02-06 21:59:10.422291', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:59:10.429494', '2020-02-06 21:59:10.429494', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:59:10.429494', '2020-02-06 21:59:10.429494', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 21:59:10.435107', 524266083, 980190962, 703875630)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:59:10.435107', 882484985, 980190962, 410440501)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:59:10.440860', '2020-02-06 21:59:10.440860', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:59:10.440860', '2020-02-06 21:59:10.440860', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:59:10.440860', '2020-02-06 21:59:10.440860', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:59:10.447331', '2020-02-06 21:59:10.447331', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:59:10.447331', '2020-02-06 21:59:10.447331', 298486374)[0m
  [1m[35m (417.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 05:59:10 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.5ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.4ms)
Completed 200 OK in 13ms (Views: 7.8ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:59:11 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 05:59:11 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.8ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at DESC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (4.1ms)
Completed 200 OK in 8ms (Views: 3.9ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:59:28.133077', '2020-02-06 21:59:28.133077', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 21:59:28.133077', '2020-02-06 21:59:28.133077', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 21:59:28.140051', '2020-02-06 21:59:28.140051', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 21:59:28.140051', '2020-02-06 21:59:28.140051', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 21:59:28.145485', 524266083, 980190962, 703875630)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 21:59:28.145485', 882484985, 980190962, 410440501)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 21:59:28.151499', '2020-02-06 21:59:28.151499', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 21:59:28.151499', '2020-02-06 21:59:28.151499', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 21:59:28.151499', '2020-02-06 21:59:28.151499', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 21:59:28.157592', '2020-02-06 21:59:28.157592', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 21:59:28.157592', '2020-02-06 21:59:28.157592', 298486374)[0m
  [1m[35m (776.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 05:59:29 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 05:59:29 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.9ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at DESC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mCACHE Book Load (0.0ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mCACHE Word Load (0.0ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at DESC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mCACHE Book Load (0.0ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.6ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mCACHE Book Load (0.0ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.6ms)[0m  [1m[34mSELECT "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mCACHE Book Load (0.0ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.6ms)[0m  [1m[34mSELECT "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at DESC[0m  [["book_id", 185728873]]
  [1m[36mCACHE Book Load (0.0ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.6ms)[0m  [1m[34mSELECT "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY learn_notes.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY learn_notes.updated_at ASC LIMIT $2[0m  [["book_id", 185728873], ["LIMIT", 11]]
  [1m[36mCACHE Book Load (0.0ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY learn_notes.updated_at DESC LIMIT $2[0m  [["book_id", 185728873], ["LIMIT", 1]]
  [1m[36mCACHE Book Load (0.0ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY learn_notes.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY learn_notes.updated_at ASC LIMIT $2[0m  [["book_id", 185728873], ["LIMIT", 11]]
  [1m[36mCACHE Book Load (0.0ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mCACHE Word Load (0.0ms)[0m  [1m[34mSELECT "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE Book Load (0.0ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mCACHE Word Load (0.0ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at DESC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.0ms)
Completed 200 OK in 329551ms (Views: 10.6ms | ActiveRecord: 5.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:04:58 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (8.0ms)
Completed 200 OK in 9ms (Views: 7.7ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:05:03.552952', '2020-02-06 22:05:03.552952', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:05:03.552952', '2020-02-06 22:05:03.552952', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:05:03.559997', '2020-02-06 22:05:03.559997', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:05:03.559997', '2020-02-06 22:05:03.559997', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:05:03.565538', 524266083, 980190962, 703875630)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:05:03.565538', 882484985, 980190962, 410440501)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:05:03.571507', '2020-02-06 22:05:03.571507', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:05:03.571507', '2020-02-06 22:05:03.571507', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:05:03.571507', '2020-02-06 22:05:03.571507', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:05:03.577865', '2020-02-06 22:05:03.577865', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:05:03.577865', '2020-02-06 22:05:03.577865', 298486374)[0m
  [1m[35m (1407.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:05:05 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:05:05 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" WHERE "books_words"."book_id" = $1[0m  [["book_id", 185728873]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.7ms)[0m  [1m[34mSELECT "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mCACHE Book Load (0.0ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mCACHE Word Load (0.0ms)[0m  [1m[34mSELECT "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mCACHE Book Load (0.0ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (1.8ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (5.1ms)
Completed 200 OK in 243505ms (Views: 10.2ms | ActiveRecord: 4.6ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.5ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:09:08 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (9.3ms)
Completed 200 OK in 11ms (Views: 9.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:09:21.433118', '2020-02-06 22:09:21.433118', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:09:21.433118', '2020-02-06 22:09:21.433118', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:09:21.440152', '2020-02-06 22:09:21.440152', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:09:21.440152', '2020-02-06 22:09:21.440152', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:09:21.445690', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:09:21.445690', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:09:21.451619', '2020-02-06 22:09:21.451619', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:09:21.451619', '2020-02-06 22:09:21.451619', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:09:21.451619', '2020-02-06 22:09:21.451619', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:09:21.457569', '2020-02-06 22:09:21.457569', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:09:21.457569', '2020-02-06 22:09:21.457569', 298486374)[0m
  [1m[35m (37.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:09:21 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.6ms)
Completed 200 OK in 13ms (Views: 8.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:09:21 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:09:21 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mCACHE Book Load (0.0ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.8ms)[0m  [1m[34mSELECT "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  Rendered words/index.json.jbuilder (4.0ms)
Completed 200 OK in 8ms (Views: 3.9ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:10:02.616281', '2020-02-06 22:10:02.616281', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:10:02.616281', '2020-02-06 22:10:02.616281', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:10:02.623303', '2020-02-06 22:10:02.623303', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:10:02.623303', '2020-02-06 22:10:02.623303', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:10:02.628612', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:10:02.628612', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:10:02.634561', '2020-02-06 22:10:02.634561', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:10:02.634561', '2020-02-06 22:10:02.634561', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:10:02.634561', '2020-02-06 22:10:02.634561', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:10:02.640851', '2020-02-06 22:10:02.640851', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:10:02.640851', '2020-02-06 22:10:02.640851', 298486374)[0m
  [1m[35m (16.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:10:02 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (8.6ms)
Completed 200 OK in 14ms (Views: 9.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:10:02 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:10:02 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.7ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (4.3ms)
Completed 200 OK in 8ms (Views: 4.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:10:17.291961', '2020-02-06 22:10:17.291961', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:10:17.291961', '2020-02-06 22:10:17.291961', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:10:17.298945', '2020-02-06 22:10:17.298945', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:10:17.298945', '2020-02-06 22:10:17.298945', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:10:17.304483', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:10:17.304483', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:10:17.310314', '2020-02-06 22:10:17.310314', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:10:17.310314', '2020-02-06 22:10:17.310314', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:10:17.310314', '2020-02-06 22:10:17.310314', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:10:17.316354', '2020-02-06 22:10:17.316354', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:10:17.316354', '2020-02-06 22:10:17.316354', 298486374)[0m
  [1m[35m (816.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:10:18 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:10:18 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.8ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at DESC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (3.8ms)
Completed 200 OK in 9ms (Views: 4.6ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:10:18 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (8.3ms)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:10:37.020315', '2020-02-06 22:10:37.020315', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:10:37.020315', '2020-02-06 22:10:37.020315', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:10:37.028195', '2020-02-06 22:10:37.028195', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:10:37.028195', '2020-02-06 22:10:37.028195', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:10:37.033917', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:10:37.033917', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:10:37.039492', '2020-02-06 22:10:37.039492', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:10:37.039492', '2020-02-06 22:10:37.039492', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:10:37.039492', '2020-02-06 22:10:37.039492', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:10:37.045836', '2020-02-06 22:10:37.045836', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:10:37.045836', '2020-02-06 22:10:37.045836', 298486374)[0m
  [1m[35m (49.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:10:37 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (8.0ms)
Completed 200 OK in 14ms (Views: 9.0ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:10:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:10:37 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.8ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (4.1ms)
Completed 200 OK in 8ms (Views: 4.0ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:12:17.721463', '2020-02-06 22:12:17.721463', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:12:17.721463', '2020-02-06 22:12:17.721463', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:12:17.728529', '2020-02-06 22:12:17.728529', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:12:17.728529', '2020-02-06 22:12:17.728529', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:12:17.734096', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:12:17.734096', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:12:17.740299', '2020-02-06 22:12:17.740299', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:12:17.740299', '2020-02-06 22:12:17.740299', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:12:17.740299', '2020-02-06 22:12:17.740299', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:12:17.746659', '2020-02-06 22:12:17.746659', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:12:17.746659', '2020-02-06 22:12:17.746659', 298486374)[0m
  [1m[35m (38.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:12:17 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.5ms)
Completed 200 OK in 13ms (Views: 8.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:12:17 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:12:17 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.7ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (3.9ms)
Completed 200 OK in 8ms (Views: 3.9ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:12:36.239617', '2020-02-06 22:12:36.239617', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:12:36.239617', '2020-02-06 22:12:36.239617', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:12:36.246538', '2020-02-06 22:12:36.246538', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:12:36.246538', '2020-02-06 22:12:36.246538', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:12:36.252063', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:12:36.252063', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:12:36.257611', '2020-02-06 22:12:36.257611', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:12:36.257611', '2020-02-06 22:12:36.257611', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:12:36.257611', '2020-02-06 22:12:36.257611', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:12:36.264292', '2020-02-06 22:12:36.264292', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:12:36.264292', '2020-02-06 22:12:36.264292', 298486374)[0m
  [1m[35m (509.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:12:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:12:36 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.9ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (3.8ms)
Completed 200 OK in 9ms (Views: 4.7ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:12:36 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.6ms)
Completed 200 OK in 9ms (Views: 7.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:13:02.635536', '2020-02-06 22:13:02.635536', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:13:02.635536', '2020-02-06 22:13:02.635536', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:13:02.642613', '2020-02-06 22:13:02.642613', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:13:02.642613', '2020-02-06 22:13:02.642613', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:13:02.648218', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:13:02.648218', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:13:02.653796', '2020-02-06 22:13:02.653796', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:13:02.653796', '2020-02-06 22:13:02.653796', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:13:02.653796', '2020-02-06 22:13:02.653796', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:13:02.660821', '2020-02-06 22:13:02.660821', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:13:02.660821', '2020-02-06 22:13:02.660821', 298486374)[0m
  [1m[35m (68.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:13:02 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:13:02 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.9ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (3.8ms)
Completed 200 OK in 9ms (Views: 4.8ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:13:02 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.5ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (8.6ms)
Completed 200 OK in 10ms (Views: 8.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:13:20.228300', '2020-02-06 22:13:20.228300', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:13:20.228300', '2020-02-06 22:13:20.228300', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:13:20.235640', '2020-02-06 22:13:20.235640', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:13:20.235640', '2020-02-06 22:13:20.235640', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:13:20.241101', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:13:20.241101', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:13:20.246444', '2020-02-06 22:13:20.246444', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:13:20.246444', '2020-02-06 22:13:20.246444', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:13:20.246444', '2020-02-06 22:13:20.246444', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:13:20.253374', '2020-02-06 22:13:20.253374', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:13:20.253374', '2020-02-06 22:13:20.253374', 298486374)[0m
  [1m[35m (686.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:13:21 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.4ms)
Completed 200 OK in 13ms (Views: 7.8ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:13:21 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:13:21 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.7ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (3.9ms)
Completed 200 OK in 8ms (Views: 3.9ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:13:47.778752', '2020-02-06 22:13:47.778752', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:13:47.778752', '2020-02-06 22:13:47.778752', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:13:47.786227', '2020-02-06 22:13:47.786227', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:13:47.786227', '2020-02-06 22:13:47.786227', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:13:47.791765', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:13:47.791765', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:13:47.797250', '2020-02-06 22:13:47.797250', 1000562403)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:13:47.797250', '2020-02-06 22:13:47.797250', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:13:47.797250', '2020-02-06 22:13:47.797250', 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:13:47.803874', '2020-02-06 22:13:47.803874', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:13:47.803874', '2020-02-06 22:13:47.803874', 298486374)[0m
  [1m[35m (21.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:13:47 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.4ms)
Completed 200 OK in 13ms (Views: 8.0ms | ActiveRecord: 1.1ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:13:47 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:13:47 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.8ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (4.1ms)
Completed 200 OK in 8ms (Views: 3.9ms | ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:15:30.873982', '2020-02-06 22:15:30.873982', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:15:30.873982', '2020-02-06 22:15:30.873982', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:15:30.881023', '2020-02-06 22:15:30.881023', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:15:30.881023', '2020-02-06 22:15:30.881023', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:15:30.886600', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:15:30.886600', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:15:30.892463', '2020-02-06 22:15:30.892463', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:15:30.892463', '2020-02-06 22:15:30.892463', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:15:30.892463', '2020-02-06 22:15:30.892463', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:15:30.898316', '2020-02-06 22:15:30.898316', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:15:30.898316', '2020-02-06 22:15:30.898316', 298486374)[0m
  [1m[35m (432.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:15:31 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.3ms)
Completed 200 OK in 13ms (Views: 8.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:15:31 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:15:31 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.7ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (4.0ms)
Completed 200 OK in 8ms (Views: 3.9ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:15:55.945011', '2020-02-06 22:15:55.945011', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:15:55.945011', '2020-02-06 22:15:55.945011', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:15:55.952050', '2020-02-06 22:15:55.952050', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:15:55.952050', '2020-02-06 22:15:55.952050', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:15:55.957679', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:15:55.957679', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:15:55.963200', '2020-02-06 22:15:55.963200', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:15:55.963200', '2020-02-06 22:15:55.963200', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:15:55.963200', '2020-02-06 22:15:55.963200', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:15:55.969973', '2020-02-06 22:15:55.969973', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:15:55.969973', '2020-02-06 22:15:55.969973', 298486374)[0m
  [1m[35m (162.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:15:56 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:15:56 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.8ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (3.8ms)
Completed 200 OK in 9ms (Views: 4.7ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:15:56 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (8.3ms)
Completed 200 OK in 9ms (Views: 7.8ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:16:13.159807', '2020-02-06 22:16:13.159807', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:16:13.159807', '2020-02-06 22:16:13.159807', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:16:13.166983', '2020-02-06 22:16:13.166983', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:16:13.166983', '2020-02-06 22:16:13.166983', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:16:13.172545', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:16:13.172545', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:16:13.178496', '2020-02-06 22:16:13.178496', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:16:13.178496', '2020-02-06 22:16:13.178496', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:16:13.178496', '2020-02-06 22:16:13.178496', 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:16:13.184804', '2020-02-06 22:16:13.184804', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:16:13.184804', '2020-02-06 22:16:13.184804', 298486374)[0m
  [1m[35m (20.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:16:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:16:13 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.8ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (4.0ms)
Completed 200 OK in 9ms (Views: 4.8ms | ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:16:37 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (8.2ms)
Completed 200 OK in 10ms (Views: 7.7ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:16:51.140698', '2020-02-06 22:16:51.140698', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:16:51.140698', '2020-02-06 22:16:51.140698', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:16:51.147734', '2020-02-06 22:16:51.147734', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:16:51.147734', '2020-02-06 22:16:51.147734', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:16:51.153370', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:16:51.153370', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:16:51.159460', '2020-02-06 22:16:51.159460', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:16:51.159460', '2020-02-06 22:16:51.159460', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'dog', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:16:51.159460', '2020-02-06 22:16:51.159460', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:16:51.165578', '2020-02-06 22:16:51.165578', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:16:51.165578', '2020-02-06 22:16:51.165578', 298486374)[0m
  [1m[35m (24.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:16:51 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.5ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.4ms)
Completed 200 OK in 13ms (Views: 7.9ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:16:51 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:16:51 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.7ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (4.1ms)
Completed 200 OK in 8ms (Views: 3.9ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:18:21.525256', '2020-02-06 22:18:21.525256', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:18:21.525256', '2020-02-06 22:18:21.525256', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:18:21.532306', '2020-02-06 22:18:21.532306', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:18:21.532306', '2020-02-06 22:18:21.532306', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:18:21.538105', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:18:21.538105', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'apple', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:18:21.544136', '2020-02-06 22:18:21.544136', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:18:21.544136', '2020-02-06 22:18:21.544136', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:18:21.544136', '2020-02-06 22:18:21.544136', 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:18:21.550612', '2020-02-06 22:18:21.550612', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:18:21.550612', '2020-02-06 22:18:21.550612', 298486374)[0m
  [1m[35m (97.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:18:21 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:18:21 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.8ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (4.1ms)
Completed 200 OK in 9ms (Views: 5.2ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:18:21 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 06:18:21 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_b LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (0.9ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:18:21 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (8.5ms)
Completed 200 OK in 10ms (Views: 8.0ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:18:47.007901', '2020-02-06 22:18:47.007901', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:18:47.007901', '2020-02-06 22:18:47.007901', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:18:47.014923', '2020-02-06 22:18:47.014923', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:18:47.014923', '2020-02-06 22:18:47.014923', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:18:47.020627', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:18:47.020627', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:18:47.026684', '2020-02-06 22:18:47.026684', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:18:47.026684', '2020-02-06 22:18:47.026684', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:18:47.026684', '2020-02-06 22:18:47.026684', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:18:47.032861', '2020-02-06 22:18:47.032861', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:18:47.032861', '2020-02-06 22:18:47.032861', 298486374)[0m
  [1m[35m (677.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:18:47 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:18:47 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.9ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (3.8ms)
Completed 200 OK in 9ms (Views: 4.8ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:18:47 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 06:18:47 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_b LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.0ms)
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:18:47 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (8.5ms)
Completed 200 OK in 10ms (Views: 8.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:19:10.952052', '2020-02-06 22:19:10.952052', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:19:10.952052', '2020-02-06 22:19:10.952052', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:19:10.959541', '2020-02-06 22:19:10.959541', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:19:10.959541', '2020-02-06 22:19:10.959541', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:19:10.965176', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:19:10.965176', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:19:10.971339', '2020-02-06 22:19:10.971339', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:19:10.971339', '2020-02-06 22:19:10.971339', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:19:10.971339', '2020-02-06 22:19:10.971339', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:19:10.977839', '2020-02-06 22:19:10.977839', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:19:10.977839', '2020-02-06 22:19:10.977839', 298486374)[0m
  [1m[35m (179.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:19:11 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.6ms)
Completed 200 OK in 14ms (Views: 8.6ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:19:11 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:19:11 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.7ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (4.6ms)
Completed 200 OK in 9ms (Views: 4.6ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:19:11 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 06:19:11 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_b LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.0ms)
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:19:36.921055', '2020-02-06 22:19:36.921055', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:19:36.921055', '2020-02-06 22:19:36.921055', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:19:36.928017', '2020-02-06 22:19:36.928017', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:19:36.928017', '2020-02-06 22:19:36.928017', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:19:36.933525', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:19:36.933525', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:19:36.939532', '2020-02-06 22:19:36.939532', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:19:36.939532', '2020-02-06 22:19:36.939532', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:19:36.939532', '2020-02-06 22:19:36.939532', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:19:36.945879', '2020-02-06 22:19:36.945879', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:19:36.945879', '2020-02-06 22:19:36.945879', 298486374)[0m
  [1m[35m (25.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:19:37 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.2ms)
Completed 200 OK in 13ms (Views: 8.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:19:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 06:19:37 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.2ms)
Completed 200 OK in 4ms (Views: 1.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:19:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:19:37 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.6ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (3.6ms)
Completed 200 OK in 6ms (Views: 3.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:22:13.051588', '2020-02-06 22:22:13.051588', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:22:13.051588', '2020-02-06 22:22:13.051588', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:22:13.058568', '2020-02-06 22:22:13.058568', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:22:13.058568', '2020-02-06 22:22:13.058568', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:22:13.064087', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:22:13.064087', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:22:13.069256', '2020-02-06 22:22:13.069256', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:22:13.069256', '2020-02-06 22:22:13.069256', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:22:13.069256', '2020-02-06 22:22:13.069256', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:22:13.075754', '2020-02-06 22:22:13.075754', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:22:13.075754', '2020-02-06 22:22:13.075754', 298486374)[0m
  [1m[35m (16.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:22:13 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.3ms)
Completed 200 OK in 13ms (Views: 7.8ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:22:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:22:13 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.7ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (4.0ms)
Completed 200 OK in 8ms (Views: 3.8ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:22:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:22:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 06:22:13 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (0.9ms)
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:22:28.960790', '2020-02-06 22:22:28.960790', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:22:28.960790', '2020-02-06 22:22:28.960790', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:22:28.967751', '2020-02-06 22:22:28.967751', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:22:28.967751', '2020-02-06 22:22:28.967751', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:22:28.973262', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:22:28.973262', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:22:28.979011', '2020-02-06 22:22:28.979011', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:22:28.979011', '2020-02-06 22:22:28.979011', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:22:28.979011', '2020-02-06 22:22:28.979011', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:22:28.985595', '2020-02-06 22:22:28.985595', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:22:28.985595', '2020-02-06 22:22:28.985595', 298486374)[0m
  [1m[35m (225.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:22:29 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:22:29 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.8ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (3.8ms)
Completed 200 OK in 9ms (Views: 4.6ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:22:29 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 06:22:29 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.0ms)
Completed 200 OK in 3ms (Views: 0.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:22:29 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 06:22:29 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  Rendered words/show.json.jbuilder (17.5ms)
Completed 500 Internal Server Error in 20ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (1.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:22:29 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (8.0ms)
Completed 200 OK in 9ms (Views: 7.6ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:22:59.849614', '2020-02-06 22:22:59.849614', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:22:59.849614', '2020-02-06 22:22:59.849614', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:22:59.856859', '2020-02-06 22:22:59.856859', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:22:59.856859', '2020-02-06 22:22:59.856859', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:22:59.862926', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:22:59.862926', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:22:59.870027', '2020-02-06 22:22:59.870027', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:22:59.870027', '2020-02-06 22:22:59.870027', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:22:59.870027', '2020-02-06 22:22:59.870027', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:22:59.876394', '2020-02-06 22:22:59.876394', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:22:59.876394', '2020-02-06 22:22:59.876394', 298486374)[0m
  [1m[35m (318.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:23:00 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.5ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (8.7ms)
Completed 200 OK in 15ms (Views: 9.5ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:23:00 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:23:00 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.7ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (4.1ms)
Completed 200 OK in 8ms (Views: 4.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:23:00 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 06:23:00 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  Rendered words/show.json.jbuilder (0.6ms)
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:23:00 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 06:23:00 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (0.9ms)
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:25:47.383879', '2020-02-06 22:25:47.383879', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:25:47.383879', '2020-02-06 22:25:47.383879', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:25:47.390793', '2020-02-06 22:25:47.390793', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:25:47.390793', '2020-02-06 22:25:47.390793', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:25:47.396230', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:25:47.396230', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:25:47.402256', '2020-02-06 22:25:47.402256', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:25:47.402256', '2020-02-06 22:25:47.402256', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:25:47.402256', '2020-02-06 22:25:47.402256', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:25:47.408596', '2020-02-06 22:25:47.408596', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:25:47.408596', '2020-02-06 22:25:47.408596', 298486374)[0m
  [1m[35m (98.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:25:47 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.5ms)
Completed 200 OK in 13ms (Views: 8.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:25:47 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:25:47 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.8ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (4.0ms)
Completed 200 OK in 8ms (Views: 3.7ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:25:47 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 06:25:47 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  Rendered words/show.json.jbuilder (0.6ms)
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:25:47 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 06:25:47 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.5ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.3ms)
Completed 200 OK in 3ms (Views: 1.1ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:26:43.341799', '2020-02-06 22:26:43.341799', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:26:43.341799', '2020-02-06 22:26:43.341799', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:26:43.349227', '2020-02-06 22:26:43.349227', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:26:43.349227', '2020-02-06 22:26:43.349227', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:26:43.355094', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:26:43.355094', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:26:43.361699', '2020-02-06 22:26:43.361699', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:26:43.361699', '2020-02-06 22:26:43.361699', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:26:43.361699', '2020-02-06 22:26:43.361699', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:26:43.368149', '2020-02-06 22:26:43.368149', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:26:43.368149', '2020-02-06 22:26:43.368149', 298486374)[0m
  [1m[35m (979.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:26:44 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.5ms)
Completed 200 OK in 13ms (Views: 8.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:26:44 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:26:44 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.7ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (4.2ms)
Completed 200 OK in 8ms (Views: 4.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:26:44 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 06:26:44 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  Rendered words/show.json.jbuilder (0.6ms)
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:26:44 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 06:26:44 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.6ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.3ms)
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:27:58.103298', '2020-02-06 22:27:58.103298', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:27:58.103298', '2020-02-06 22:27:58.103298', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:27:58.110300', '2020-02-06 22:27:58.110300', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:27:58.110300', '2020-02-06 22:27:58.110300', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:27:58.115605', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:27:58.115605', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:27:58.121225', '2020-02-06 22:27:58.121225', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:27:58.121225', '2020-02-06 22:27:58.121225', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:27:58.121225', '2020-02-06 22:27:58.121225', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:27:58.127634', '2020-02-06 22:27:58.127634', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:27:58.127634', '2020-02-06 22:27:58.127634', 298486374)[0m
  [1m[35m (169.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:27:58 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.1ms)
Completed 200 OK in 13ms (Views: 8.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:27:58 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 06:27:58 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  Rendered words/show.json.jbuilder (0.6ms)
Completed 200 OK in 4ms (Views: 1.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:27:58 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:27:58 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.7ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (3.9ms)
Completed 200 OK in 6ms (Views: 3.5ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:27:58 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 06:27:58 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:28:43.635564', '2020-02-06 22:28:43.635564', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 22:28:43.635564', '2020-02-06 22:28:43.635564', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 22:28:43.643516', '2020-02-06 22:28:43.643516', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 22:28:43.643516', '2020-02-06 22:28:43.643516', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 22:28:43.649280', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 22:28:43.649280', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 22:28:43.655356', '2020-02-06 22:28:43.655356', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 22:28:43.655356', '2020-02-06 22:28:43.655356', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 22:28:43.655356', '2020-02-06 22:28:43.655356', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 22:28:43.661745', '2020-02-06 22:28:43.661745', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 22:28:43.661745', '2020-02-06 22:28:43.661745', 298486374)[0m
  [1m[35m (107.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 06:28:43 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (8.4ms)
Completed 200 OK in 14ms (Views: 9.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:28:43 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 06:28:43 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.7ms)[0m  [1m[34mSELECT  "words".* FROM "words" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (4.7ms)
Completed 200 OK in 9ms (Views: 4.5ms | ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:28:43 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 06:28:43 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  Rendered words/show.json.jbuilder (0.6ms)
Completed 200 OK in 3ms (Views: 0.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 06:28:44 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 06:28:44 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  Rendered words/index.json.jbuilder (1.0ms)
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 23:04:34.760827', '2020-02-06 23:04:34.760827', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 23:04:34.760827', '2020-02-06 23:04:34.760827', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:04:34.768147', '2020-02-06 23:04:34.768147', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:04:34.768147', '2020-02-06 23:04:34.768147', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:04:34.773851', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:04:34.773851', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:04:34.779414', '2020-02-06 23:04:34.779414', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:04:34.779414', '2020-02-06 23:04:34.779414', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:04:34.779414', '2020-02-06 23:04:34.779414', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:04:34.786215', '2020-02-06 23:04:34.786215', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:04:34.786215', '2020-02-06 23:04:34.786215', 298486374)[0m
  [1m[35m (21.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:04:34 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:04:34 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  Rendered words/index.json.jbuilder (26.3ms)
Completed 500 Internal Server Error in 31ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:04:35 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:04:35 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  Rendered words/show.json.jbuilder (28.0ms)
Completed 500 Internal Server Error in 30ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:04:35 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:04:35 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  Rendered words/index.json.jbuilder (19.8ms)
Completed 500 Internal Server Error in 21ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:04:35 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.6ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 23:04:57.165766', '2020-02-06 23:04:57.165766', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 23:04:57.165766', '2020-02-06 23:04:57.165766', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:04:57.172618', '2020-02-06 23:04:57.172618', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:04:57.172618', '2020-02-06 23:04:57.172618', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:04:57.178233', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:04:57.178233', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:04:57.184241', '2020-02-06 23:04:57.184241', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:04:57.184241', '2020-02-06 23:04:57.184241', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:04:57.184241', '2020-02-06 23:04:57.184241', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:04:57.190212', '2020-02-06 23:04:57.190212', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:04:57.190212', '2020-02-06 23:04:57.190212', 298486374)[0m
  [1m[35m (233.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:04:57 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.6ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:04:57 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.2ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (14.9ms)
Completed 200 OK in 20ms (Views: 14.0ms | ActiveRecord: 3.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:04:57 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:04:57 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (5.6ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:04:57 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:04:57 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  Rendered words/show.json.jbuilder (17.8ms)
Completed 500 Internal Server Error in 28ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:04:57 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.4ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 23:05:23.940369', '2020-02-06 23:05:23.940369', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 23:05:23.940369', '2020-02-06 23:05:23.940369', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:05:23.947393', '2020-02-06 23:05:23.947393', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:05:23.947393', '2020-02-06 23:05:23.947393', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:05:23.952841', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:05:23.952841', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:05:23.958850', '2020-02-06 23:05:23.958850', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:05:23.958850', '2020-02-06 23:05:23.958850', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:05:23.958850', '2020-02-06 23:05:23.958850', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:05:23.965028', '2020-02-06 23:05:23.965028', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:05:23.965028', '2020-02-06 23:05:23.965028', 298486374)[0m
  [1m[35m (33.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:05:24 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.3ms)
Completed 200 OK in 13ms (Views: 8.0ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:05:24 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:05:24 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (14.0ms)
Completed 200 OK in 18ms (Views: 12.3ms | ActiveRecord: 2.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:05:24 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:05:24 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (1.8ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (15.8ms)
Completed 200 OK in 17ms (Views: 13.5ms | ActiveRecord: 2.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:05:24 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:05:24 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.6ms)
Completed 200 OK in 4ms (Views: 1.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 23:06:44.043360', '2020-02-06 23:06:44.043360', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 23:06:44.043360', '2020-02-06 23:06:44.043360', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:06:44.050345', '2020-02-06 23:06:44.050345', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:06:44.050345', '2020-02-06 23:06:44.050345', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:06:44.055839', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:06:44.055839', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:06:44.061309', '2020-02-06 23:06:44.061309', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:06:44.061309', '2020-02-06 23:06:44.061309', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:06:44.061309', '2020-02-06 23:06:44.061309', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:06:44.068006', '2020-02-06 23:06:44.068006', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:06:44.068006', '2020-02-06 23:06:44.068006', 298486374)[0m
  [1m[35m (37.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:06:44 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:06:44 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (9.9ms)
Completed 200 OK in 14ms (Views: 10.2ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:06:44 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:06:44 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (9.4ms)
Completed 200 OK in 12ms (Views: 7.2ms | ActiveRecord: 2.9ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (1.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:07:50 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:07:50 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.5ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:07:50 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.1ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 23:07:53.374172', '2020-02-06 23:07:53.374172', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 23:07:53.374172', '2020-02-06 23:07:53.374172', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:07:53.381391', '2020-02-06 23:07:53.381391', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:07:53.381391', '2020-02-06 23:07:53.381391', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:07:53.387113', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:07:53.387113', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:07:53.392850', '2020-02-06 23:07:53.392850', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:07:53.392850', '2020-02-06 23:07:53.392850', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:07:53.392850', '2020-02-06 23:07:53.392850', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:07:53.399481', '2020-02-06 23:07:53.399481', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:07:53.399481', '2020-02-06 23:07:53.399481', 298486374)[0m
  [1m[35m (14.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:07:53 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:07:53 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (9.9ms)
Completed 200 OK in 14ms (Views: 10.2ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:07:53 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:07:53 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (9.7ms)
Completed 200 OK in 12ms (Views: 7.6ms | ActiveRecord: 3.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:08:00 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:08:00 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.8ms)
Completed 200 OK in 4ms (Views: 1.8ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:08:00 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.4ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 23:08:18.636562', '2020-02-06 23:08:18.636562', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 23:08:18.636562', '2020-02-06 23:08:18.636562', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:08:18.643500', '2020-02-06 23:08:18.643500', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:08:18.643500', '2020-02-06 23:08:18.643500', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:08:18.649193', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:08:18.649193', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:08:18.655144', '2020-02-06 23:08:18.655144', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:08:18.655144', '2020-02-06 23:08:18.655144', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:08:18.655144', '2020-02-06 23:08:18.655144', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:08:18.661728', '2020-02-06 23:08:18.661728', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:08:18.661728', '2020-02-06 23:08:18.661728', 298486374)[0m
  [1m[35m (688.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:08:19 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:08:19 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (9.9ms)
Completed 200 OK in 14ms (Views: 10.4ms | ActiveRecord: 1.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:08:19 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:08:19 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.5ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:08:19 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:08:19 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (1.7ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (20.8ms)
Completed 200 OK in 24ms (Views: 17.3ms | ActiveRecord: 4.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:08:19 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (6.0ms)
Completed 200 OK in 7ms (Views: 5.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 23:09:32.611782', '2020-02-06 23:09:32.611782', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id") VALUES (1, '2020-02-06 23:09:32.611782', '2020-02-06 23:09:32.611782', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:09:32.619359', '2020-02-06 23:09:32.619359', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:09:32.619359', '2020-02-06 23:09:32.619359', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:09:32.625125', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:09:32.625125', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:09:32.630794', '2020-02-06 23:09:32.630794', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:09:32.630794', '2020-02-06 23:09:32.630794', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:09:32.630794', '2020-02-06 23:09:32.630794', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:09:32.636961', '2020-02-06 23:09:32.636961', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:09:32.636961', '2020-02-06 23:09:32.636961', 298486374)[0m
  [1m[35m (341.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:09:33 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.4ms)
Completed 200 OK in 13ms (Views: 8.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:09:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:09:33 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.2ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (14.8ms)
Completed 200 OK in 19ms (Views: 12.6ms | ActiveRecord: 3.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:09:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:09:33 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (13.0ms)
Completed 200 OK in 14ms (Views: 12.3ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:09:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:09:33 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.6ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:30:45.413459', '2020-02-06 23:30:45.413459', 980190962, 668453117, 403530730)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:30:45.413459', '2020-02-06 23:30:45.413459', 298486374, 668453117, 906871558)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:30:45.420632', '2020-02-06 23:30:45.420632', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:30:45.420632', '2020-02-06 23:30:45.420632', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:30:45.426185', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:30:45.426185', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:30:45.432235', '2020-02-06 23:30:45.432235', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:30:45.432235', '2020-02-06 23:30:45.432235', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:30:45.432235', '2020-02-06 23:30:45.432235', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:30:45.438541', '2020-02-06 23:30:45.438541', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:30:45.438541', '2020-02-06 23:30:45.438541', 298486374)[0m
  [1m[35m (115.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:30:45 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:30:45 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.2ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (13.7ms)
Completed 200 OK in 19ms (Views: 12.7ms | ActiveRecord: 3.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:30:45 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:30:45 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (5.9ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 1.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:30:45 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:30:45 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.8ms)
Completed 200 OK in 14ms (Views: 1.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:30:45 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.7ms)
Completed 200 OK in 7ms (Views: 5.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NoteBooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:30:45 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:30:45 +0800
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:31:58.444845', '2020-02-06 23:31:58.444845', 980190962, 668453117, 403530730)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:31:58.444845', '2020-02-06 23:31:58.444845', 298486374, 668453117, 906871558)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:31:58.452466', '2020-02-06 23:31:58.452466', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:31:58.452466', '2020-02-06 23:31:58.452466', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:31:58.458154', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:31:58.458154', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:31:58.464130', '2020-02-06 23:31:58.464130', 1000562403)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:31:58.464130', '2020-02-06 23:31:58.464130', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:31:58.464130', '2020-02-06 23:31:58.464130', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:31:58.471303', '2020-02-06 23:31:58.471303', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:31:58.471303', '2020-02-06 23:31:58.471303', 298486374)[0m
  [1m[35m (19.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NoteBooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:31:58 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:31:58 +0800
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:31:58 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:31:58 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (3.2ms)
Completed 200 OK in 8ms (Views: 4.7ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:31:58 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:31:58 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.1ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (14.0ms)
Completed 200 OK in 17ms (Views: 11.7ms | ActiveRecord: 3.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (1.6ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:31:58 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:31:58 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (6.2ms)
Completed 200 OK in 8ms (Views: 5.4ms | ActiveRecord: 1.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:31:58 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.5ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:34:00.792444', '2020-02-06 23:34:00.792444', 980190962, 668453117, 403530730)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:34:00.792444', '2020-02-06 23:34:00.792444', 298486374, 668453117, 906871558)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:34:00.799774', '2020-02-06 23:34:00.799774', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:34:00.799774', '2020-02-06 23:34:00.799774', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:34:00.805445', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:34:00.805445', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:34:00.811026', '2020-02-06 23:34:00.811026', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:34:00.811026', '2020-02-06 23:34:00.811026', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:34:00.811026', '2020-02-06 23:34:00.811026', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:34:00.818123', '2020-02-06 23:34:00.818123', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:34:00.818123', '2020-02-06 23:34:00.818123', 298486374)[0m
  [1m[35m (15.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NoteBooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:34:00 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:34:10 +0800
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:37:14 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:37:14 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (9.2ms)
Completed 200 OK in 22ms (Views: 19.7ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:37:14 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:37:14 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (15.1ms)
Completed 200 OK in 18ms (Views: 12.8ms | ActiveRecord: 3.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:37:14 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:37:14 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.5ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (4.1ms)
Completed 200 OK in 6ms (Views: 3.2ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:37:14 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:37:14 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.4ms)
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:37:22.368599', '2020-02-06 23:37:22.368599', 980190962, 668453117, 403530730)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:37:22.368599', '2020-02-06 23:37:22.368599', 298486374, 668453117, 906871558)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:37:22.375694', '2020-02-06 23:37:22.375694', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:37:22.375694', '2020-02-06 23:37:22.375694', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:37:22.381165', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:37:22.381165', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:37:22.386964', '2020-02-06 23:37:22.386964', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:37:22.386964', '2020-02-06 23:37:22.386964', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:37:22.386964', '2020-02-06 23:37:22.386964', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:37:22.393433', '2020-02-06 23:37:22.393433', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:37:22.393433', '2020-02-06 23:37:22.393433', 298486374)[0m
  [1m[35m (22.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:37:22 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.3ms)
Completed 200 OK in 13ms (Views: 8.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:37:22 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:37:22 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:37:22 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:37:22 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (2.6ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (25.9ms)
Completed 200 OK in 29ms (Views: 21.6ms | ActiveRecord: 5.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:37:22 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:37:22 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.6ms)
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:37:22 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:37:22 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (3.2ms)
Completed 200 OK in 5ms (Views: 2.5ms | ActiveRecord: 1.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:38:14.157768', '2020-02-06 23:38:14.157768', 980190962, 668453117, 403530730)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:38:14.157768', '2020-02-06 23:38:14.157768', 298486374, 668453117, 906871558)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:38:14.165366', '2020-02-06 23:38:14.165366', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:38:14.165366', '2020-02-06 23:38:14.165366', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:38:14.171140', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:38:14.171140', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:38:14.176807', '2020-02-06 23:38:14.176807', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:38:14.176807', '2020-02-06 23:38:14.176807', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:38:14.176807', '2020-02-06 23:38:14.176807', 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:38:14.183743', '2020-02-06 23:38:14.183743', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:38:14.183743', '2020-02-06 23:38:14.183743', 298486374)[0m
  [1m[35m (1143.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:38:15 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.5ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (8.6ms)
Completed 200 OK in 14ms (Views: 9.0ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:38:15 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:38:15 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:38:15 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:38:15 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (8.2ms)
Completed 200 OK in 10ms (Views: 7.7ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (1.5ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:38:15 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:38:15 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.5ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:38:15 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:38:15 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.1ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (11.3ms)
Completed 200 OK in 14ms (Views: 8.9ms | ActiveRecord: 3.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:39:22.865290', '2020-02-06 23:39:22.865290', 980190962, 668453117, 403530730)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:39:22.865290', '2020-02-06 23:39:22.865290', 298486374, 668453117, 906871558)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:39:22.872284', '2020-02-06 23:39:22.872284', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:39:22.872284', '2020-02-06 23:39:22.872284', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:39:22.877821', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:39:22.877821', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:39:22.883876', '2020-02-06 23:39:22.883876', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:39:22.883876', '2020-02-06 23:39:22.883876', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:39:22.883876', '2020-02-06 23:39:22.883876', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:39:22.890214', '2020-02-06 23:39:22.890214', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:39:22.890214', '2020-02-06 23:39:22.890214', 298486374)[0m
  [1m[35m (117.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:39:23 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:39:23 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (9.8ms)
Completed 200 OK in 14ms (Views: 10.3ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:39:23 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:39:23 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (9.7ms)
Completed 200 OK in 12ms (Views: 7.6ms | ActiveRecord: 2.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:39:23 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:39:23 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.8ms)
Completed 200 OK in 14ms (Views: 1.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:39:23 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:39:23 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:39:23 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.1ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:39:40.664810', '2020-02-06 23:39:40.664810', 980190962, 668453117, 403530730)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:39:40.664810', '2020-02-06 23:39:40.664810', 298486374, 668453117, 906871558)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:39:40.671827', '2020-02-06 23:39:40.671827', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:39:40.671827', '2020-02-06 23:39:40.671827', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:39:40.677455', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:39:40.677455', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:39:40.683292', '2020-02-06 23:39:40.683292', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:39:40.683292', '2020-02-06 23:39:40.683292', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:39:40.683292', '2020-02-06 23:39:40.683292', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:39:40.689301', '2020-02-06 23:39:40.689301', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:39:40.689301', '2020-02-06 23:39:40.689301', 298486374)[0m
  [1m[35m (296.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:39:41 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:39:41 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (9.7ms)
Completed 200 OK in 14ms (Views: 10.2ms | ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:39:41 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:39:41 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.0ms)
Completed 200 OK in 13ms (Views: 7.9ms | ActiveRecord: 3.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:39:41 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:39:41 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (1.6ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.7ms)
Completed 200 OK in 14ms (Views: 1.7ms | ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:39:41 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.2ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:39:41 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:39:41 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
No template found for NotebooksController#index, rendering head :no_content
Completed 204 No Content in 5ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:40:34.268371', '2020-02-06 23:40:34.268371', 980190962, 668453117, 403530730)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:40:34.268371', '2020-02-06 23:40:34.268371', 298486374, 668453117, 906871558)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:40:34.275578', '2020-02-06 23:40:34.275578', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:40:34.275578', '2020-02-06 23:40:34.275578', 548926451)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:40:34.281046', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:40:34.281046', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:40:34.287119', '2020-02-06 23:40:34.287119', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:40:34.287119', '2020-02-06 23:40:34.287119', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:40:34.287119', '2020-02-06 23:40:34.287119', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:40:34.293335', '2020-02-06 23:40:34.293335', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:40:34.293335', '2020-02-06 23:40:34.293335', 298486374)[0m
  [1m[35m (22.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:40:34 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:40:34 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.5ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.1ms)
Completed 200 OK in 14ms (Views: 10.3ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:40:34 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:40:34 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.6ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:40:34 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:40:34 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (1.7ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (21.1ms)
Completed 200 OK in 24ms (Views: 17.4ms | ActiveRecord: 4.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:40:34 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.2ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:40:34 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:40:40 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
No template found for NotebooksController#index, rendering head :no_content
Completed 204 No Content in 6ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:40:51 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
No template found for NotebooksController#index, rendering head :no_content
Completed 204 No Content in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:41:11.269330', '2020-02-06 23:41:11.269330', 980190962, 668453117, 403530730)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:41:11.269330', '2020-02-06 23:41:11.269330', 298486374, 668453117, 906871558)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:41:11.276351', '2020-02-06 23:41:11.276351', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:41:11.276351', '2020-02-06 23:41:11.276351', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:41:11.281703', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:41:11.281703', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:41:11.287450', '2020-02-06 23:41:11.287450', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:41:11.287450', '2020-02-06 23:41:11.287450', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:41:11.287450', '2020-02-06 23:41:11.287450', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:41:11.293465', '2020-02-06 23:41:11.293465', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:41:11.293465', '2020-02-06 23:41:11.293465', 298486374)[0m
  [1m[35m (1037.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:41:12 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:41:12 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mNotebook Load (0.4ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" ORDER BY "notebooks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
No template found for NotebooksController#index, rendering head :no_content
Completed 204 No Content in 115666ms (ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:43:08 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.4ms)
Completed 200 OK in 10ms (Views: 8.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:43:08 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:43:08 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (14.9ms)
Completed 200 OK in 18ms (Views: 13.1ms | ActiveRecord: 2.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:43:08 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:43:08 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (3.7ms)
Completed 200 OK in 5ms (Views: 3.0ms | ActiveRecord: 1.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:43:08 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:43:08 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.4ms)
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:43:11.313959', '2020-02-06 23:43:11.313959', 980190962, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:43:11.313959', '2020-02-06 23:43:11.313959', 298486374, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:43:11.320948', '2020-02-06 23:43:11.320948', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:43:11.320948', '2020-02-06 23:43:11.320948', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:43:11.326509', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:43:11.326509', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:43:11.332384', '2020-02-06 23:43:11.332384', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:43:11.332384', '2020-02-06 23:43:11.332384', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:43:11.332384', '2020-02-06 23:43:11.332384', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:43:11.338295', '2020-02-06 23:43:11.338295', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:43:11.338295', '2020-02-06 23:43:11.338295', 298486374)[0m
  [1m[35m (11.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:43:11 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.2ms)
Completed 200 OK in 13ms (Views: 7.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:43:11 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:43:11 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
No template found for NotebooksController#index, rendering head :no_content
Completed 204 No Content in 6ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:43:11 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:43:11 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (8.0ms)
Completed 200 OK in 10ms (Views: 7.4ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (1.5ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:43:11 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:43:11 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (9.7ms)
Completed 200 OK in 12ms (Views: 7.6ms | ActiveRecord: 2.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:43:11 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:43:11 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.5ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:43:32.596960', '2020-02-06 23:43:32.596960', 980190962, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:43:32.596960', '2020-02-06 23:43:32.596960', 298486374, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:43:32.603864', '2020-02-06 23:43:32.603864', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:43:32.603864', '2020-02-06 23:43:32.603864', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:43:32.609605', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:43:32.609605', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:43:32.615612', '2020-02-06 23:43:32.615612', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:43:32.615612', '2020-02-06 23:43:32.615612', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:43:32.615612', '2020-02-06 23:43:32.615612', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:43:32.621791', '2020-02-06 23:43:32.621791', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:43:32.621791', '2020-02-06 23:43:32.621791', 298486374)[0m
  [1m[35m (687.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:43:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:43:33 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (13.8ms)
Completed 200 OK in 19ms (Views: 12.9ms | ActiveRecord: 2.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:43:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:43:33 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (5.7ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:43:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:43:33 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.8ms)
Completed 200 OK in 14ms (Views: 1.7ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:43:33 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.7ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:43:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:43:33 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.4ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" ORDER BY "notebooks"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mNotebook Load (0.5ms)[0m  [1m[34mSELECT "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."update" DESC[0m  [["user_id", 980190962]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."update" DESC LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 11]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."update" DESC[0m  [["user_id", 980190962]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."update" DESC LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 11]]
  [1m[36mNotebook Load (1.0ms)[0m  [1m[34mSELECT "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC[0m  [["user_id", 980190962]]
  [1m[36mNotebook Load (0.9ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 11]]
  [1m[36mCACHE Notebook Load (0.0ms)[0m  [1m[34mSELECT "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mWord Load (8.6ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  [1m[36mNotebook Load (0.4ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 11]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."id" DESC LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
No template found for NotebooksController#index, rendering head :no_content
Completed 204 No Content in 71274ms (ActiveRecord: 13.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:44:48.008638', '2020-02-06 23:44:48.008638', 980190962, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:44:48.008638', '2020-02-06 23:44:48.008638', 298486374, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:44:48.016245', '2020-02-06 23:44:48.016245', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:44:48.016245', '2020-02-06 23:44:48.016245', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:44:48.021846', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:44:48.021846', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:44:48.027393', '2020-02-06 23:44:48.027393', 1000562403)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:44:48.027393', '2020-02-06 23:44:48.027393', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:44:48.027393', '2020-02-06 23:44:48.027393', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:44:48.034734', '2020-02-06 23:44:48.034734', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:44:48.034734', '2020-02-06 23:44:48.034734', 298486374)[0m
  [1m[35m (17.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:44:48 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:44:48 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  [1m[36mNotebook Load (0.5ms)[0m  [1m[34mSELECT "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC[0m  [["user_id", 980190962]]
  [1m[36mCACHE Word Load (0.0ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
No template found for NotebooksController#index, rendering head :no_content
Completed 204 No Content in 29888ms (ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:45:18 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:45:18 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.5ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (11.7ms)
Completed 200 OK in 16ms (Views: 12.5ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:45:18 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:45:18 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.8ms)
Completed 200 OK in 4ms (Views: 1.9ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:45:18 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:45:18 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.4ms)
Completed 200 OK in 13ms (Views: 8.2ms | ActiveRecord: 2.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:45:18 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (4.9ms)
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:45:50.340584', '2020-02-06 23:45:50.340584', 980190962, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:45:50.340584', '2020-02-06 23:45:50.340584', 298486374, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:45:50.347640', '2020-02-06 23:45:50.347640', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:45:50.347640', '2020-02-06 23:45:50.347640', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:45:50.353112', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:45:50.353112', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:45:50.358535', '2020-02-06 23:45:50.358535', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:45:50.358535', '2020-02-06 23:45:50.358535', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:45:50.358535', '2020-02-06 23:45:50.358535', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:45:50.364946', '2020-02-06 23:45:50.364946', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:45:50.364946', '2020-02-06 23:45:50.364946', 298486374)[0m
  [1m[35m (140.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:45:50 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:45:50 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.5ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (11.6ms)
Completed 500 Internal Server Error in 16ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:45:50 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (6.3ms)
Completed 200 OK in 7ms (Views: 5.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:45:50 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:45:50 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (19.2ms)
Completed 200 OK in 21ms (Views: 18.5ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:45:50 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:45:50 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.5ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:45:50 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:45:50 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.9ms)
Completed 200 OK in 13ms (Views: 8.8ms | ActiveRecord: 3.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:46:22.651773', '2020-02-06 23:46:22.651773', 980190962, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:46:22.651773', '2020-02-06 23:46:22.651773', 298486374, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:46:22.658864', '2020-02-06 23:46:22.658864', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:46:22.658864', '2020-02-06 23:46:22.658864', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:46:22.664217', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:46:22.664217', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:46:22.670223', '2020-02-06 23:46:22.670223', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:46:22.670223', '2020-02-06 23:46:22.670223', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:46:22.670223', '2020-02-06 23:46:22.670223', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:46:22.676337', '2020-02-06 23:46:22.676337', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:46:22.676337', '2020-02-06 23:46:22.676337', 298486374)[0m
  [1m[35m (88.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:46:22 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:46:22 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (13.4ms)
Completed 200 OK in 18ms (Views: 12.6ms | ActiveRecord: 3.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:46:22 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:46:22 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (5.9ms)
Completed 200 OK in 8ms (Views: 5.0ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:46:22 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:46:22 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (1.5ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.7ms)
Completed 200 OK in 14ms (Views: 1.7ms | ActiveRecord: 2.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:46:23 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:46:23 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.5ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (7.1ms)
Completed 200 OK in 10ms (Views: 7.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:46:23 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (4.2ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:47:42.748874', '2020-02-06 23:47:42.748874', 980190962, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:47:42.748874', '2020-02-06 23:47:42.748874', 298486374, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:47:42.755871', '2020-02-06 23:47:42.755871', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:47:42.755871', '2020-02-06 23:47:42.755871', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:47:42.761503', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:47:42.761503', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:47:42.767521', '2020-02-06 23:47:42.767521', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:47:42.767521', '2020-02-06 23:47:42.767521', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:47:42.767521', '2020-02-06 23:47:42.767521', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:47:42.773728', '2020-02-06 23:47:42.773728', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:47:42.773728', '2020-02-06 23:47:42.773728', 298486374)[0m
  [1m[35m (470.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:47:43 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:47:43 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.5ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (7.8ms)
Completed 200 OK in 13ms (Views: 8.9ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:47:43 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.2ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:47:43 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:47:43 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (25.5ms)
Completed 200 OK in 29ms (Views: 23.5ms | ActiveRecord: 3.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:47:43 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:47:43 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (3.6ms)
Completed 200 OK in 5ms (Views: 2.8ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:47:43 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:47:43 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (2.1ms)
Completed 200 OK in 5ms (Views: 2.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:49:01.309989', '2020-02-06 23:49:01.309989', 980190962, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:49:01.309989', '2020-02-06 23:49:01.309989', 298486374, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:49:01.317013', '2020-02-06 23:49:01.317013', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:49:01.317013', '2020-02-06 23:49:01.317013', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:49:01.323269', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:49:01.323269', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:49:01.328777', '2020-02-06 23:49:01.328777', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:49:01.328777', '2020-02-06 23:49:01.328777', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:49:01.328777', '2020-02-06 23:49:01.328777', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:49:01.334935', '2020-02-06 23:49:01.334935', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:49:01.334935', '2020-02-06 23:49:01.334935', 298486374)[0m
  [1m[35m (14.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:49:01 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:49:01 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"#<Word:0x000055b15fa56660>"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 9ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:49:01 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:49:01 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.5ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (4.9ms)
Completed 200 OK in 9ms (Views: 6.0ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:49:01 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.4ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.5ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:49:01 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:49:01 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (8.4ms)
Completed 200 OK in 10ms (Views: 7.7ms | ActiveRecord: 1.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:49:01 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:49:01 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.8ms)
Completed 200 OK in 13ms (Views: 8.5ms | ActiveRecord: 2.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:49:01 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:49:01 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.4ms)
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:49:39.841297', '2020-02-06 23:49:39.841297', 980190962, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:49:39.841297', '2020-02-06 23:49:39.841297', 298486374, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:49:39.848496', '2020-02-06 23:49:39.848496', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:49:39.848496', '2020-02-06 23:49:39.848496', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:49:39.854158', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:49:39.854158', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:49:39.860171', '2020-02-06 23:49:39.860171', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:49:39.860171', '2020-02-06 23:49:39.860171', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:49:39.860171', '2020-02-06 23:49:39.860171', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:49:39.866396', '2020-02-06 23:49:39.866396', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:49:39.866396', '2020-02-06 23:49:39.866396', 298486374)[0m
  [1m[35m (35.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:49:40 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:49:40 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.4ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (7.6ms)
Completed 200 OK in 12ms (Views: 8.5ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:49:40 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:49:40 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"#<Word:0x0000563a854caa20>", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 5ms (ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:49:40 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.5ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (6.2ms)
Completed 200 OK in 8ms (Views: 5.8ms | ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (1.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:49:40 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:49:40 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (14.9ms)
Completed 200 OK in 18ms (Views: 12.8ms | ActiveRecord: 3.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:49:40 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:49:40 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.9ms)
Completed 200 OK in 4ms (Views: 1.8ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:49:40 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:49:40 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (3.6ms)
Completed 200 OK in 5ms (Views: 2.8ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:50:02.149584', '2020-02-06 23:50:02.149584', 980190962, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:50:02.149584', '2020-02-06 23:50:02.149584', 298486374, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:50:02.156620', '2020-02-06 23:50:02.156620', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:50:02.156620', '2020-02-06 23:50:02.156620', 548926451)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:50:02.162211', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:50:02.162211', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:50:02.168301', '2020-02-06 23:50:02.168301', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:50:02.168301', '2020-02-06 23:50:02.168301', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:50:02.168301', '2020-02-06 23:50:02.168301', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:50:02.174651', '2020-02-06 23:50:02.174651', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:50:02.174651', '2020-02-06 23:50:02.174651', 298486374)[0m
  [1m[35m (31.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:50:02 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:50:02 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-06 23:50:02.352159"], ["updated_at", "2020-02-06 23:50:02.352159"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 10ms (Views: 2.0ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:50:02 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:50:02 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.5ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (5.1ms)
Completed 200 OK in 7ms (Views: 4.5ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:50:02 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:50:02 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (2.3ms)
Completed 200 OK in 5ms (Views: 2.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (1.5ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:50:02 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:50:02 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (13.6ms)
Completed 200 OK in 17ms (Views: 11.6ms | ActiveRecord: 3.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:50:02 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:50:02 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (4.3ms)
Completed 200 OK in 6ms (Views: 3.5ms | ActiveRecord: 1.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:50:02 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (4.1ms)
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:53:09.361920', '2020-02-06 23:53:09.361920', 980190962, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:53:09.361920', '2020-02-06 23:53:09.361920', 298486374, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:53:09.369105', '2020-02-06 23:53:09.369105', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:53:09.369105', '2020-02-06 23:53:09.369105', 548926451)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:53:09.374520', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:53:09.374520', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:53:09.380782', '2020-02-06 23:53:09.380782', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:53:09.380782', '2020-02-06 23:53:09.380782', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:53:09.380782', '2020-02-06 23:53:09.380782', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:53:09.386992', '2020-02-06 23:53:09.386992', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:53:09.386992', '2020-02-06 23:53:09.386992', 298486374)[0m
  [1m[35m (16.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:53:09 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:53:09 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (13.5ms)
Completed 200 OK in 18ms (Views: 12.7ms | ActiveRecord: 3.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:53:09 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:53:09 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (5.7ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:53:09 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:53:09 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.8ms)
Completed 200 OK in 15ms (Views: 1.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:53:09 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:53:09 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-06 23:53:09.632638"], ["updated_at", "2020-02-06 23:53:09.632638"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.4ms)
Completed 200 OK in 8ms (Views: 1.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:53:09 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:53:09 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (3.2ms)
Completed 200 OK in 5ms (Views: 3.0ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:53:09 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (4.8ms)
Completed 200 OK in 6ms (Views: 4.5ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:54:54.661107', '2020-02-06 23:54:54.661107', 980190962, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:54:54.661107', '2020-02-06 23:54:54.661107', 298486374, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:54:54.668076', '2020-02-06 23:54:54.668076', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:54:54.668076', '2020-02-06 23:54:54.668076', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:54:54.673599', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:54:54.673599', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:54:54.679600', '2020-02-06 23:54:54.679600', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:54:54.679600', '2020-02-06 23:54:54.679600', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:54:54.679600', '2020-02-06 23:54:54.679600', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:54:54.685916', '2020-02-06 23:54:54.685916', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:54:54.685916', '2020-02-06 23:54:54.685916', 298486374)[0m
  [1m[35m (142.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:54:54 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:54:54 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-06 23:54:55.007500"], ["updated_at", "2020-02-06 23:54:55.007500"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 10ms (Views: 2.0ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:54:55 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:54:55 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.5ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (4.7ms)
Completed 200 OK in 8ms (Views: 4.2ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:54:55 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:54:55 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (19.5ms)
Completed 200 OK in 22ms (Views: 19.2ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:54:55 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:54:55 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.7ms)
Completed 200 OK in 4ms (Views: 1.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:54:55 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:54:55 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.8ms)
Completed 200 OK in 13ms (Views: 8.5ms | ActiveRecord: 2.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:54:55 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (4.2ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:55:05.082084', '2020-02-06 23:55:05.082084', 980190962, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:55:05.082084', '2020-02-06 23:55:05.082084', 298486374, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:55:05.089138', '2020-02-06 23:55:05.089138', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:55:05.089138', '2020-02-06 23:55:05.089138', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:55:05.094682', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:55:05.094682', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:55:05.100694', '2020-02-06 23:55:05.100694', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:55:05.100694', '2020-02-06 23:55:05.100694', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:55:05.100694', '2020-02-06 23:55:05.100694', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:55:05.106838', '2020-02-06 23:55:05.106838', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:55:05.106838', '2020-02-06 23:55:05.106838', 298486374)[0m
  [1m[35m (104.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:55:05 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:55:05 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-06 23:55:05.388587"], ["updated_at", "2020-02-06 23:55:05.388587"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 10ms (Views: 2.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:55:05 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:55:05 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.5ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (4.9ms)
Completed 200 OK in 8ms (Views: 4.5ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:55:05 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.2ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:55:05 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:55:05 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (9.1ms)
Completed 200 OK in 11ms (Views: 8.3ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:55:05 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:55:05 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.3ms)
Completed 200 OK in 13ms (Views: 8.2ms | ActiveRecord: 2.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:55:05 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:55:05 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.5ms)
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:57:29.701004', '2020-02-06 23:57:29.701004', 980190962, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:57:29.701004', '2020-02-06 23:57:29.701004', 298486374, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:57:29.707962', '2020-02-06 23:57:29.707962', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:57:29.707962', '2020-02-06 23:57:29.707962', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:57:29.713450', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:57:29.713450', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:57:29.719344', '2020-02-06 23:57:29.719344', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:57:29.719344', '2020-02-06 23:57:29.719344', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:57:29.719344', '2020-02-06 23:57:29.719344', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:57:29.725485', '2020-02-06 23:57:29.725485', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:57:29.725485', '2020-02-06 23:57:29.725485', 298486374)[0m
  [1m[35m (37.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:57:29 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:57:29 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (9.9ms)
Completed 200 OK in 14ms (Views: 10.2ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:57:29 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:57:29 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.6ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:57:29 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:57:29 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (2.0ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (21.5ms)
Completed 200 OK in 24ms (Views: 17.7ms | ActiveRecord: 4.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_delete
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:57:30 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:57:30 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 10ms (ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:57:30 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:57:30 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.4ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (3.1ms)
Completed 200 OK in 6ms (Views: 3.1ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:57:30 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:57:30 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-06 23:57:30.060227"], ["updated_at", "2020-02-06 23:57:30.060227"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:57:30 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (4.4ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:58:09.781456', '2020-02-06 23:58:09.781456', 980190962, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:58:09.781456', '2020-02-06 23:58:09.781456', 298486374, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:58:09.788848', '2020-02-06 23:58:09.788848', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:58:09.788848', '2020-02-06 23:58:09.788848', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:58:09.794298', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:58:09.794298', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:58:09.800494', '2020-02-06 23:58:09.800494', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:58:09.800494', '2020-02-06 23:58:09.800494', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:58:09.800494', '2020-02-06 23:58:09.800494', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:58:09.806704', '2020-02-06 23:58:09.806704', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:58:09.806704', '2020-02-06 23:58:09.806704', 298486374)[0m
  [1m[35m (23.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:58:09 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.2ms)
Completed 200 OK in 13ms (Views: 7.8ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_delete
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:58:09 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started DELETE "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:58:09 +0800
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:58:10 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:58:10 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (5.5ms)
Completed 200 OK in 9ms (Views: 5.5ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:58:10 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:58:10 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-06 23:58:10.042286"], ["updated_at", "2020-02-06 23:58:10.042286"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.4ms)
Completed 200 OK in 5ms (Views: 0.7ms | ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:58:10 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:58:10 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (2.9ms)
Completed 200 OK in 5ms (Views: 3.1ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:58:10 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:58:10 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (13.0ms)
Completed 200 OK in 16ms (Views: 11.0ms | ActiveRecord: 2.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:58:10 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:58:10 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.5ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (4.1ms)
Completed 200 OK in 6ms (Views: 3.1ms | ActiveRecord: 1.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:58:35.981142', '2020-02-06 23:58:35.981142', 980190962, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:58:35.981142', '2020-02-06 23:58:35.981142', 298486374, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:58:35.988251', '2020-02-06 23:58:35.988251', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:58:35.988251', '2020-02-06 23:58:35.988251', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:58:35.993687', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:58:35.993687', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:58:35.999701', '2020-02-06 23:58:35.999701', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:58:35.999701', '2020-02-06 23:58:35.999701', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:58:35.999701', '2020-02-06 23:58:35.999701', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:58:36.005730', '2020-02-06 23:58:36.005730', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:58:36.005730', '2020-02-06 23:58:36.005730', 298486374)[0m
  [1m[35m (315.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_delete
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:58:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started DELETE "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:58:36 +0800
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:58:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:58:36 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-06 23:58:36.495133"], ["updated_at", "2020-02-06 23:58:36.495133"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.4ms)
Completed 200 OK in 11ms (Views: 2.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:58:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:58:36 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.5ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (4.9ms)
Completed 200 OK in 7ms (Views: 4.4ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:58:36 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.1ms)
Completed 200 OK in 16ms (Views: 4.9ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:58:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:58:36 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (14.5ms)
Completed 200 OK in 18ms (Views: 12.6ms | ActiveRecord: 3.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:58:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:58:36 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (3.6ms)
Completed 200 OK in 5ms (Views: 2.9ms | ActiveRecord: 1.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:58:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:58:36 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (2.0ms)
Completed 200 OK in 4ms (Views: 2.1ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:59:37.185091', '2020-02-06 23:59:37.185091', 980190962, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:59:37.185091', '2020-02-06 23:59:37.185091', 298486374, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:59:37.192066', '2020-02-06 23:59:37.192066', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:59:37.192066', '2020-02-06 23:59:37.192066', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:59:37.197390', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:59:37.197390', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:59:37.203313', '2020-02-06 23:59:37.203313', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:59:37.203313', '2020-02-06 23:59:37.203313', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:59:37.203313', '2020-02-06 23:59:37.203313', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:59:37.209592', '2020-02-06 23:59:37.209592', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:59:37.209592', '2020-02-06 23:59:37.209592', 298486374)[0m
  [1m[35m (19.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:59:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:59:37 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-06 23:59:37.406306"], ["updated_at", "2020-02-06 23:59:37.406306"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 10ms (Views: 2.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_delete
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:59:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started DELETE "/api/v1/notebooks/1000562403" for 127.0.0.1 at 2020-02-07 07:59:37 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:59:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:59:37 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.5ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (5.6ms)
Completed 200 OK in 8ms (Views: 5.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (1.5ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:59:37 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.1ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:59:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:59:37 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (15.5ms)
Completed 200 OK in 18ms (Views: 13.3ms | ActiveRecord: 3.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:59:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:59:37 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (3.2ms)
Completed 200 OK in 5ms (Views: 2.7ms | ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:59:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:59:37 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.5ms)
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:59:57.392095', '2020-02-06 23:59:57.392095', 980190962, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-06 23:59:57.392095', '2020-02-06 23:59:57.392095', 298486374, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-06 23:59:57.399178', '2020-02-06 23:59:57.399178', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-06 23:59:57.399178', '2020-02-06 23:59:57.399178', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-06 23:59:57.404673', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-06 23:59:57.404673', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-06 23:59:57.410673', '2020-02-06 23:59:57.410673', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-06 23:59:57.410673', '2020-02-06 23:59:57.410673', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-06 23:59:57.410673', '2020-02-06 23:59:57.410673', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-06 23:59:57.416994', '2020-02-06 23:59:57.416994', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-06 23:59:57.416994', '2020-02-06 23:59:57.416994', 298486374)[0m
  [1m[35m (591.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 07:59:58 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.7ms)
Completed 200 OK in 14ms (Views: 8.4ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:59:58 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.6ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 07:59:58 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (8.8ms)
Completed 200 OK in 12ms (Views: 8.1ms | ActiveRecord: 1.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:59:58 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 07:59:58 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.5ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (1.7ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:59:58 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 07:59:58 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.5ms)
Completed 200 OK in 13ms (Views: 8.2ms | ActiveRecord: 3.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:59:58 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:59:58 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-06 23:59:58.276247"], ["updated_at", "2020-02-06 23:59:58.276247"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 8ms (Views: 0.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:59:58 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 07:59:58 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.2ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_delete
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 07:59:58 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started DELETE "/api/v1/notebooks/1000562403" for 127.0.0.1 at 2020-02-07 07:59:58 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 1000562403], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:01:07.497729', '2020-02-07 00:01:07.497729', 980190962, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:01:07.497729', '2020-02-07 00:01:07.497729', 298486374, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:01:07.505217', '2020-02-07 00:01:07.505217', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:01:07.505217', '2020-02-07 00:01:07.505217', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:01:07.510941', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:01:07.510941', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:01:07.516684', '2020-02-07 00:01:07.516684', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:01:07.516684', '2020-02-07 00:01:07.516684', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:01:07.516684', '2020-02-07 00:01:07.516684', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:01:07.522936', '2020-02-07 00:01:07.522936', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:01:07.522936', '2020-02-07 00:01:07.522936', 298486374)[0m
  [1m[35m (706.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_delete
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:01:08 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started DELETE "/api/v1/notebooks/1000562403" for 127.0.0.1 at 2020-02-07 08:01:08 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mNotebook Load (0.4ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 1000562403], ["LIMIT", 1]]
  [1m[36mCACHE Notebook Load (0.0ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 1000562403], ["LIMIT", 1]]
Completed 404 Not Found in 96764ms (ActiveRecord: 0.9ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.7ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.6ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.6ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:02:45 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:02:45 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.8ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.5ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (8.3ms)
Completed 200 OK in 16ms (Views: 10.6ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:02:45 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:02:45 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:02:45.212529"], ["updated_at", "2020-02-07 00:02:45.212529"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.4ms)
Completed 200 OK in 5ms (Views: 0.7ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:02:45 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.1ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:02:45 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:02:45 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (14.2ms)
Completed 200 OK in 17ms (Views: 12.3ms | ActiveRecord: 2.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:02:45 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:02:45 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (1.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (10.1ms)
Completed 200 OK in 13ms (Views: 9.0ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:02:45 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:02:45 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (3.5ms)
Completed 200 OK in 5ms (Views: 2.8ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:02:53.809378', '2020-02-07 00:02:53.809378', 178234897, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:02:53.816321', '2020-02-07 00:02:53.816321', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:02:53.816321', '2020-02-07 00:02:53.816321', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:02:53.821791', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:02:53.821791', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:02:53.827898', '2020-02-07 00:02:53.827898', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:02:53.827898', '2020-02-07 00:02:53.827898', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:02:53.827898', '2020-02-07 00:02:53.827898', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:02:53.834160', '2020-02-07 00:02:53.834160', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:02:53.834160', '2020-02-07 00:02:53.834160', 298486374)[0m
  [1m[35m (23.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:02:53 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:02:53 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.2ms)
Completed 200 OK in 14ms (Views: 10.5ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:02:54 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:02:54 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (9.4ms)
Completed 200 OK in 12ms (Views: 7.4ms | ActiveRecord: 2.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:02:54 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:02:54 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.5ms)
Completed 200 OK in 15ms (Views: 1.6ms | ActiveRecord: 2.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:02:54 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.9ms)
Completed 200 OK in 7ms (Views: 5.5ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:02:54 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:02:54 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:02:54.096516"], ["updated_at", "2020-02-07 00:02:54.096516"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 8ms (Views: 1.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:02:54 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:02:54 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" = 268784245[0m
  Rendered notebooks/index.json.jbuilder (2.0ms)
Completed 200 OK in 4ms (Views: 1.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_delete
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:02:54 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:02:54 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:02:54.130877"], ["id", 178234897]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
No template found for NotebooksController#destroy, rendering head :no_content
Completed 204 No Content in 11ms (ActiveRecord: 1.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:04:14.368879', '2020-02-07 00:04:14.368879', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:04:14.368879', '2020-02-07 00:04:14.368879', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:04:14.376108', '2020-02-07 00:04:14.376108', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:04:14.376108', '2020-02-07 00:04:14.376108', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:04:14.381321', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:04:14.381321', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:04:14.387388', '2020-02-07 00:04:14.387388', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:04:14.387388', '2020-02-07 00:04:14.387388', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:04:14.387388', '2020-02-07 00:04:14.387388', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:04:14.393475', '2020-02-07 00:04:14.393475', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:04:14.393475', '2020-02-07 00:04:14.393475', 298486374)[0m
  [1m[35m (667.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:04:15 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.3ms)
Completed 200 OK in 13ms (Views: 7.9ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:04:15 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:04:15 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (14.5ms)
Completed 200 OK in 18ms (Views: 12.4ms | ActiveRecord: 3.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:04:15 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:04:15 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (1.6ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (14.3ms)
Completed 200 OK in 16ms (Views: 12.1ms | ActiveRecord: 2.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:04:15 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:04:15 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.5ms)
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:04:15 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:04:15 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (5.7ms)
Completed 200 OK in 8ms (Views: 5.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_delete
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:04:15 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:04:15 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:04:15.349396"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
No template found for NotebooksController#destroy, rendering head :no_content
Completed 204 No Content in 10ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:04:15 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:04:15 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:04:15.370651"], ["updated_at", "2020-02-07 00:04:15.370651"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:05:01.533350', '2020-02-07 00:05:01.533350', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:05:01.533350', '2020-02-07 00:05:01.533350', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:05:01.540378', '2020-02-07 00:05:01.540378', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:05:01.540378', '2020-02-07 00:05:01.540378', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:05:01.545999', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:05:01.545999', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:05:01.552111', '2020-02-07 00:05:01.552111', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:05:01.552111', '2020-02-07 00:05:01.552111', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:05:01.552111', '2020-02-07 00:05:01.552111', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:05:01.558163', '2020-02-07 00:05:01.558163', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:05:01.558163', '2020-02-07 00:05:01.558163', 298486374)[0m
  [1m[35m (718.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:05:02 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:05:02 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:05:02.425445"], ["updated_at", "2020-02-07 00:05:02.425445"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 10ms (Views: 2.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_delete
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:05:02 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:05:02 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mNotebook Load (0.4ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[36mCACHE Notebook Load (0.0ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:05:58.133325"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 55692ms (Views: 0.6ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:05:58 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:05:58 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.4ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.5ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (5.3ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:05:58 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:05:58 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (14.5ms)
Completed 200 OK in 17ms (Views: 12.6ms | ActiveRecord: 2.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:05:58 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:05:58 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.5ms)
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:05:58 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:05:58 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (4.4ms)
Completed 200 OK in 7ms (Views: 3.6ms | ActiveRecord: 2.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:05:58 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (4.7ms)
Completed 200 OK in 6ms (Views: 4.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:06:15.968383', '2020-02-07 00:06:15.968383', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:06:15.968383', '2020-02-07 00:06:15.968383', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:06:15.975558', '2020-02-07 00:06:15.975558', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:06:15.975558', '2020-02-07 00:06:15.975558', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:06:15.981164', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:06:15.981164', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:06:15.987370', '2020-02-07 00:06:15.987370', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:06:15.987370', '2020-02-07 00:06:15.987370', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:06:15.987370', '2020-02-07 00:06:15.987370', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:06:15.993413', '2020-02-07 00:06:15.993413', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:06:15.993413', '2020-02-07 00:06:15.993413', 298486374)[0m
  [1m[35m (284.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:06:16 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.8ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:06:16 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.1ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (13.6ms)
Completed 200 OK in 19ms (Views: 12.7ms | ActiveRecord: 3.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:06:16 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:06:16 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.7ms)
Completed 200 OK in 4ms (Views: 1.8ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:06:16 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:06:16 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (17.5ms)
Completed 200 OK in 19ms (Views: 16.4ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:06:16 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:06:16 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:06:16.507426"], ["updated_at", "2020-02-07 00:06:16.507426"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.4ms)
Completed 200 OK in 9ms (Views: 1.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_delete
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:06:16 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:06:16 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:06:16.526331"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 5ms (Views: 0.7ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:06:16 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:06:16 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (3.1ms)
Completed 200 OK in 5ms (Views: 2.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:06:16 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (4.7ms)
Completed 200 OK in 6ms (Views: 4.4ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:06:42.785551', '2020-02-07 00:06:42.785551', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:06:42.785551', '2020-02-07 00:06:42.785551', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:06:42.792586', '2020-02-07 00:06:42.792586', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:06:42.792586', '2020-02-07 00:06:42.792586', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:06:42.797921', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:06:42.797921', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:06:42.803576', '2020-02-07 00:06:42.803576', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:06:42.803576', '2020-02-07 00:06:42.803576', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:06:42.803576', '2020-02-07 00:06:42.803576', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:06:42.809732', '2020-02-07 00:06:42.809732', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:06:42.809732', '2020-02-07 00:06:42.809732', 298486374)[0m
  [1m[35m (595.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:06:43 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.3ms)
Completed 200 OK in 13ms (Views: 8.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:06:43 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:06:43 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (8.1ms)
Completed 200 OK in 11ms (Views: 7.6ms | ActiveRecord: 1.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:06:43 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:06:43 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.6ms)
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (1.9ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:06:43 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:06:43 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (9.5ms)
Completed 200 OK in 12ms (Views: 7.5ms | ActiveRecord: 2.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:06:43 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:06:43 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:06:43.652793"], ["updated_at", "2020-02-07 00:06:43.652793"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 9ms (Views: 1.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_delete
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:06:43 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:06:43 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.4ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:06:43.671721"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 7ms (Views: 0.7ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:06:43 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:06:43 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.1ms)
Completed 200 OK in 4ms (Views: 1.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:07:12.812862', '2020-02-07 00:07:12.812862', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:07:12.812862', '2020-02-07 00:07:12.812862', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:07:12.819863', '2020-02-07 00:07:12.819863', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:07:12.819863', '2020-02-07 00:07:12.819863', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:07:12.825582', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:07:12.825582', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:07:12.831487', '2020-02-07 00:07:12.831487', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:07:12.831487', '2020-02-07 00:07:12.831487', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:07:12.831487', '2020-02-07 00:07:12.831487', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:07:12.837757', '2020-02-07 00:07:12.837757', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:07:12.837757', '2020-02-07 00:07:12.837757', 298486374)[0m
  [1m[35m (264.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:07:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:07:13 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (13.3ms)
Completed 200 OK in 18ms (Views: 12.4ms | ActiveRecord: 3.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:07:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:07:13 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.5ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:07:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:07:13 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (17.2ms)
Completed 200 OK in 19ms (Views: 16.2ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:07:13 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.7ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:07:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:07:13 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:07:13.376269"], ["updated_at", "2020-02-07 00:07:13.376269"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 8ms (Views: 0.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_delete
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:07:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:07:13 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:07:13.394034"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:07:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:07:13 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.6ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (3.0ms)
Completed 200 OK in 5ms (Views: 2.5ms | ActiveRecord: 1.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:07:45.689216', '2020-02-07 00:07:45.689216', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:07:45.689216', '2020-02-07 00:07:45.689216', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:07:45.696298', '2020-02-07 00:07:45.696298', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:07:45.696298', '2020-02-07 00:07:45.696298', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:07:45.701786', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:07:45.701786', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:07:45.707848', '2020-02-07 00:07:45.707848', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:07:45.707848', '2020-02-07 00:07:45.707848', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:07:45.707848', '2020-02-07 00:07:45.707848', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:07:45.714159', '2020-02-07 00:07:45.714159', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:07:45.714159', '2020-02-07 00:07:45.714159', 298486374)[0m
  [1m[35m (268.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:07:46 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.2ms)
Completed 200 OK in 13ms (Views: 7.9ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:07:46 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:07:46 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:07:46.182697"], ["updated_at", "2020-02-07 00:07:46.182697"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.4ms)
Completed 200 OK in 9ms (Views: 1.0ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:07:46 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:07:46 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:07:46.200743"], ["id", 178234897]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.4ms)
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (11.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:07:46 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:07:46 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.3ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:07:46 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:07:46 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (2.4ms)
Completed 200 OK in 5ms (Views: 2.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:07:46 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:07:46 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.5ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (7.1ms)
Completed 200 OK in 9ms (Views: 6.4ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:07:46 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:07:46 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.3ms)
Completed 200 OK in 13ms (Views: 8.2ms | ActiveRecord: 2.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:08:23.383402', '2020-02-07 00:08:23.383402', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:08:23.383402', '2020-02-07 00:08:23.383402', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:08:23.390955', '2020-02-07 00:08:23.390955', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:08:23.390955', '2020-02-07 00:08:23.390955', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:08:23.396533', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:08:23.396533', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:08:23.402173', '2020-02-07 00:08:23.402173', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:08:23.402173', '2020-02-07 00:08:23.402173', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:08:23.402173', '2020-02-07 00:08:23.402173', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:08:23.408960', '2020-02-07 00:08:23.408960', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:08:23.408960', '2020-02-07 00:08:23.408960', 298486374)[0m
  [1m[35m (731.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:08:24 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:08:24 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.6ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (8.0ms)
Completed 200 OK in 12ms (Views: 8.6ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:08:24 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:08:24 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:08:24.332524"], ["updated_at", "2020-02-07 00:08:24.332524"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:08:24 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:08:24 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:08:43.102887"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 30477ms (Views: 0.6ms | ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:08:54 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:08:54 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.5ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (11.6ms)
Completed 200 OK in 14ms (Views: 10.9ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:08:54 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:08:54 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.5ms)
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:08:54 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:08:54 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.1ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.1ms)
Completed 200 OK in 12ms (Views: 8.1ms | ActiveRecord: 2.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (1.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:08:54 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (4.4ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:09:14.244225', '2020-02-07 00:09:14.244225', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:09:14.244225', '2020-02-07 00:09:14.244225', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:09:14.251361', '2020-02-07 00:09:14.251361', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:09:14.251361', '2020-02-07 00:09:14.251361', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:09:14.256884', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:09:14.256884', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:09:14.262952', '2020-02-07 00:09:14.262952', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:09:14.262952', '2020-02-07 00:09:14.262952', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:09:14.262952', '2020-02-07 00:09:14.262952', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:09:14.268991', '2020-02-07 00:09:14.268991', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:09:14.268991', '2020-02-07 00:09:14.268991', 298486374)[0m
  [1m[35m (13.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:09:14 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:09:14 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.5ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (9.4ms)
Completed 200 OK in 15ms (Views: 10.6ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:09:14 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:09:14 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:09:14.457995"], ["updated_at", "2020-02-07 00:09:14.457995"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:09:14 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:09:14 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:09:16.318229"], ["id", 178234897]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 1848ms (Views: 0.6ms | ActiveRecord: 1.2ms)
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:09:16 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (4.8ms)
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:09:16 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:09:16 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (8.0ms)
Completed 200 OK in 10ms (Views: 7.3ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:09:16 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:09:16 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.4ms)
Completed 200 OK in 13ms (Views: 8.2ms | ActiveRecord: 2.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:09:16 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:09:16 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (2.2ms)
Completed 200 OK in 4ms (Views: 2.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:09:29.089003', '2020-02-07 00:09:29.089003', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:09:29.089003', '2020-02-07 00:09:29.089003', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:09:29.096412', '2020-02-07 00:09:29.096412', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:09:29.096412', '2020-02-07 00:09:29.096412', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:09:29.101797', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:09:29.101797', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:09:29.107954', '2020-02-07 00:09:29.107954', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:09:29.107954', '2020-02-07 00:09:29.107954', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:09:29.107954', '2020-02-07 00:09:29.107954', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:09:29.114127', '2020-02-07 00:09:29.114127', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:09:29.114127', '2020-02-07 00:09:29.114127', 298486374)[0m
  [1m[35m (378.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:09:29 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:09:29 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (2.5ms)
Completed 200 OK in 7ms (Views: 3.8ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:09:29 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:09:29 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (13.2ms)
Completed 200 OK in 16ms (Views: 10.8ms | ActiveRecord: 3.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:09:29 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:09:29 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (16.4ms)
Completed 200 OK in 18ms (Views: 15.7ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:09:29 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.1ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:09:29 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:09:29 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:09:29.735136"], ["updated_at", "2020-02-07 00:09:29.735136"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 9ms (Views: 0.9ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:09:29 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.4ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:09:29 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:09:29.753813"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 1.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:09:29 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:09:29 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.2ms)
Completed 200 OK in 4ms (Views: 1.9ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:31:33.017256', '2020-02-07 00:31:33.017256', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:31:33.017256', '2020-02-07 00:31:33.017256', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:31:33.024226', '2020-02-07 00:31:33.024226', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:31:33.024226', '2020-02-07 00:31:33.024226', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:31:33.029833', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:31:33.029833', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:31:33.035882', '2020-02-07 00:31:33.035882', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:31:33.035882', '2020-02-07 00:31:33.035882', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:31:33.035882', '2020-02-07 00:31:33.035882', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:31:33.042197', '2020-02-07 00:31:33.042197', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:31:33.042197', '2020-02-07 00:31:33.042197', 298486374)[0m
  [1m[35m (17.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:31:33 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.2ms)
Completed 200 OK in 13ms (Views: 8.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:31:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:31:33 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:31:33.232696"], ["updated_at", "2020-02-07 00:31:33.232696"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 10ms (Views: 1.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:31:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:31:33 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:31:33.251280"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 1.0ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (1.6ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:31:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:31:33 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.4ms)
Completed 200 OK in 4ms (Views: 2.1ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
LearnNotesControllerTest: test_create
-------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:31:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/learn_note" for 127.0.0.1 at 2020-02-07 08:31:33 +0800
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:31:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:31:33 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (2.5ms)
Completed 200 OK in 5ms (Views: 2.7ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:31:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:31:33 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (13.1ms)
Completed 200 OK in 16ms (Views: 11.0ms | ActiveRecord: 2.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:31:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:31:33 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (4.0ms)
Completed 200 OK in 5ms (Views: 3.1ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:32:23.136263', '2020-02-07 00:32:23.136263', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:32:23.136263', '2020-02-07 00:32:23.136263', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:32:23.142835', '2020-02-07 00:32:23.142835', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:32:23.142835', '2020-02-07 00:32:23.142835', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:32:23.148038', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:32:23.148038', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:32:23.153571', '2020-02-07 00:32:23.153571', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:32:23.153571', '2020-02-07 00:32:23.153571', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:32:23.153571', '2020-02-07 00:32:23.153571', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:32:23.160266', '2020-02-07 00:32:23.160266', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:32:23.160266', '2020-02-07 00:32:23.160266', 298486374)[0m
  [1m[35m (198.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:32:23 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:32:23 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (2.4ms)
Completed 200 OK in 7ms (Views: 3.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:32:23 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:32:23 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (12.9ms)
Completed 200 OK in 16ms (Views: 10.6ms | ActiveRecord: 3.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:32:23 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:32:23 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (16.0ms)
Completed 200 OK in 17ms (Views: 15.1ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:32:23 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.4ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
LearnNotesControllerTest: test_create
-------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:32:23 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:32:23 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:32:23.631091"], ["updated_at", "2020-02-07 00:32:23.631091"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (18.5ms)
Completed 500 Internal Server Error in 26ms (ActiveRecord: 1.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:32:23 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:32:23 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:32:23.676064"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 6ms (Views: 0.9ms | ActiveRecord: 1.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:32:23 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:32:23 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:32:23.691910"], ["updated_at", "2020-02-07 00:32:23.691910"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:32:23 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:32:23 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.4ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.6ms)
Completed 200 OK in 5ms (Views: 2.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:32:46.479691', '2020-02-07 00:32:46.479691', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:32:46.479691', '2020-02-07 00:32:46.479691', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:32:46.486835', '2020-02-07 00:32:46.486835', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:32:46.486835', '2020-02-07 00:32:46.486835', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:32:46.492389', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:32:46.492389', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:32:46.498327', '2020-02-07 00:32:46.498327', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:32:46.498327', '2020-02-07 00:32:46.498327', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:32:46.498327', '2020-02-07 00:32:46.498327', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:32:46.504672', '2020-02-07 00:32:46.504672', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:32:46.504672', '2020-02-07 00:32:46.504672', 298486374)[0m
  [1m[35m (121.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:32:46 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:32:46 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.1ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (13.5ms)
Completed 200 OK in 18ms (Views: 12.6ms | ActiveRecord: 3.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:32:46 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:32:46 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.5ms)
Completed 200 OK in 4ms (Views: 1.7ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:32:46 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:32:46 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (17.5ms)
Completed 200 OK in 19ms (Views: 16.6ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:32:46 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:32:46 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:32:46.883599"], ["updated_at", "2020-02-07 00:32:46.883599"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.4ms)
Completed 200 OK in 9ms (Views: 1.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:32:46 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:32:46 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:32:46.901090"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 5ms (Views: 0.7ms | ActiveRecord: 0.9ms)
  [1m[36mNotebook Load (0.1ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:32:46 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:32:46 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.9ms)
Completed 200 OK in 4ms (Views: 2.7ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
LearnNotesControllerTest: test_create
-------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:32:46 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:32:46 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:32:46.936047"], ["updated_at", "2020-02-07 00:32:46.936047"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.8ms)
Completed 200 OK in 8ms (Views: 1.4ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:32:46 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (4.1ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:34:59.261444', '2020-02-07 00:34:59.261444', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:34:59.261444', '2020-02-07 00:34:59.261444', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:34:59.268538', '2020-02-07 00:34:59.268538', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:34:59.268538', '2020-02-07 00:34:59.268538', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:34:59.274224', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:34:59.274224', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:34:59.280203', '2020-02-07 00:34:59.280203', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:34:59.280203', '2020-02-07 00:34:59.280203', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:34:59.280203', '2020-02-07 00:34:59.280203', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:34:59.286137', '2020-02-07 00:34:59.286137', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:34:59.286137', '2020-02-07 00:34:59.286137', 298486374)[0m
  [1m[35m (99.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:34:59 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:34:59 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:34:59.533994"], ["updated_at", "2020-02-07 00:34:59.533994"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 10ms (Views: 2.0ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:34:59 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:34:59 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:34:59.555339"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 1.0ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:34:59 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:34:59 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.4ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (4.9ms)
Completed 200 OK in 7ms (Views: 4.4ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (1.7ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:34:59 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.2ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:34:59 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:34:59 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (2.4ms)
Completed 200 OK in 5ms (Views: 2.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:34:59 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:34:59 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (13.8ms)
Completed 200 OK in 16ms (Views: 11.8ms | ActiveRecord: 2.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:34:59 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:34:59 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (4.4ms)
Completed 200 OK in 6ms (Views: 3.5ms | ActiveRecord: 1.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
LearnNotesControllerTest: test_create
-------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:34:59 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:34:59 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:34:59.683763"], ["updated_at", "2020-02-07 00:34:59.683763"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.7ms)
Completed 200 OK in 7ms (Views: 1.3ms | ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:40:34.269284', '2020-02-07 00:40:34.269284', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:40:34.269284', '2020-02-07 00:40:34.269284', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:40:34.276421', '2020-02-07 00:40:34.276421', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:40:34.276421', '2020-02-07 00:40:34.276421', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:40:34.281837', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:40:34.281837', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:40:34.288022', '2020-02-07 00:40:34.288022', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:40:34.288022', '2020-02-07 00:40:34.288022', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:40:34.288022', '2020-02-07 00:40:34.288022', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:40:34.294017', '2020-02-07 00:40:34.294017', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:40:34.294017', '2020-02-07 00:40:34.294017', 298486374)[0m
  [1m[35m (87.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:40:34 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.1ms)
Completed 200 OK in 13ms (Views: 7.8ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:40:34 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:40:34 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (14.5ms)
Completed 200 OK in 18ms (Views: 12.5ms | ActiveRecord: 3.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:40:34 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:40:34 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (1.9ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (16.2ms)
Completed 200 OK in 17ms (Views: 13.9ms | ActiveRecord: 2.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:40:34 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:40:34 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.5ms)
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:40:34 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:40:34 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:40:34.628932"], ["updated_at", "2020-02-07 00:40:34.628932"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 9ms (Views: 0.9ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:40:34 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:40:34 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.4ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.9ms)
Completed 200 OK in 6ms (Views: 2.6ms | ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:40:34 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:40:34 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:40:34.661954"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.9ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:40:34 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "words" WHERE "words"."id" = $1[0m  [["id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:40:34 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 7ms (ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:40:34 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:40:34 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:40:34.708221"], ["updated_at", "2020-02-07 00:40:34.708221"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.8ms)
Completed 200 OK in 15ms (Views: 1.4ms | ActiveRecord: 3.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:41:22.467438', '2020-02-07 00:41:22.467438', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:41:22.467438', '2020-02-07 00:41:22.467438', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:41:22.474350', '2020-02-07 00:41:22.474350', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:41:22.474350', '2020-02-07 00:41:22.474350', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:41:22.479767', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:41:22.479767', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:41:22.485753', '2020-02-07 00:41:22.485753', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:41:22.485753', '2020-02-07 00:41:22.485753', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:41:22.485753', '2020-02-07 00:41:22.485753', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:41:22.491982', '2020-02-07 00:41:22.491982', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:41:22.491982', '2020-02-07 00:41:22.491982', 298486374)[0m
  [1m[35m (16.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:41:22 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "words" WHERE "words"."id" = $1[0m  [["id", 1000562403]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:41:22 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (1.0ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[36mCACHE LearnNote Load (0.0ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 120869ms (ActiveRecord: 2.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:43:23 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:43:23 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:44:33.281920"], ["updated_at", "2020-02-07 00:44:33.281920"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.8ms)
Completed 200 OK in 69755ms (Views: 3.0ms | ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:44:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:44:33 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (7.5ms)
Completed 200 OK in 10ms (Views: 6.9ms | ActiveRecord: 1.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:44:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:44:33 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.1ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.5ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (20.3ms)
Completed 200 OK in 23ms (Views: 17.6ms | ActiveRecord: 3.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:44:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:44:33 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.6ms)
Completed 200 OK in 4ms (Views: 1.7ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:44:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:44:33 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:44:33.383998"], ["updated_at", "2020-02-07 00:44:33.383998"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.4ms)
Completed 200 OK in 9ms (Views: 1.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:44:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:44:33 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:44:33.403056"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 1.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:44:33 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:44:33 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (3.1ms)
Completed 200 OK in 5ms (Views: 2.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:44:33 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (4.3ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:44:35.832886', '2020-02-07 00:44:35.832886', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:44:35.832886', '2020-02-07 00:44:35.832886', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:44:35.839858', '2020-02-07 00:44:35.839858', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:44:35.839858', '2020-02-07 00:44:35.839858', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:44:35.845575', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:44:35.845575', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:44:35.851631', '2020-02-07 00:44:35.851631', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:44:35.851631', '2020-02-07 00:44:35.851631', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:44:35.851631', '2020-02-07 00:44:35.851631', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:44:35.858152', '2020-02-07 00:44:35.858152', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:44:35.858152', '2020-02-07 00:44:35.858152', 298486374)[0m
  [1m[35m (14.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:44:35 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:44:36 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:44:36.019664"], ["updated_at", "2020-02-07 00:44:36.019664"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.7ms)
Completed 200 OK in 10ms (Views: 2.5ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:44:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:44:36 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:44:36.040443"], ["updated_at", "2020-02-07 00:44:36.040443"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484987], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.6ms)
Completed 200 OK in 6ms (Views: 1.0ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:44:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:44:36 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.5ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (19.6ms)
Completed 200 OK in 22ms (Views: 19.3ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:44:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:44:36 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:44:36.095798"], ["updated_at", "2020-02-07 00:44:36.095798"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:44:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:44:36 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:44:36.112460"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 1.0ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:44:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:44:36 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (5.2ms)
Completed 200 OK in 8ms (Views: 5.2ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:44:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:44:36 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.8ms)
Completed 200 OK in 4ms (Views: 1.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:44:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:44:36 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (9.6ms)
Completed 200 OK in 12ms (Views: 7.5ms | ActiveRecord: 2.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:44:36 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (12.9ms)
Completed 200 OK in 14ms (Views: 12.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:45:06.660941', '2020-02-07 00:45:06.660941', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:45:06.660941', '2020-02-07 00:45:06.660941', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:45:06.668032', '2020-02-07 00:45:06.668032', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:45:06.668032', '2020-02-07 00:45:06.668032', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:45:06.673465', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:45:06.673465', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:45:06.679616', '2020-02-07 00:45:06.679616', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:45:06.679616', '2020-02-07 00:45:06.679616', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:45:06.679616', '2020-02-07 00:45:06.679616', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:45:06.685727', '2020-02-07 00:45:06.685727', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:45:06.685727', '2020-02-07 00:45:06.685727', 298486374)[0m
  [1m[35m (296.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:45:07 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:45:07 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes"[0m
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[36mCACHE LearnNote Load (0.0ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:46:12.767753"], ["updated_at", "2020-02-07 00:46:12.767753"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.9ms)
Completed 200 OK in 65606ms (Views: 3.2ms | ActiveRecord: 3.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:46:12 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:46:12 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:46:15.726868"], ["updated_at", "2020-02-07 00:46:15.726868"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484987], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.6ms)
Completed 200 OK in 2940ms (Views: 1.0ms | ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:46:15 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:46:15 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.5ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (3.1ms)
Completed 200 OK in 6ms (Views: 3.4ms | ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:46:15 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:46:15 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.1ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (12.4ms)
Completed 200 OK in 16ms (Views: 10.0ms | ActiveRecord: 3.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:46:15 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:46:15 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (7.2ms)
Completed 200 OK in 9ms (Views: 6.3ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:46:15 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:46:15 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:46:15.838823"], ["updated_at", "2020-02-07 00:46:15.838823"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.4ms)
Completed 200 OK in 10ms (Views: 1.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:46:15 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:46:15 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:46:15.859847"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 6ms (Views: 0.6ms | ActiveRecord: 1.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:46:15 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:46:15 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (3.2ms)
Completed 200 OK in 5ms (Views: 3.0ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:46:15 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (4.3ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:46:36.640734', '2020-02-07 00:46:36.640734', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:46:36.640734', '2020-02-07 00:46:36.640734', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:46:36.647799', '2020-02-07 00:46:36.647799', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:46:36.647799', '2020-02-07 00:46:36.647799', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:46:36.653457', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:46:36.653457', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:46:36.659653', '2020-02-07 00:46:36.659653', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:46:36.659653', '2020-02-07 00:46:36.659653', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:46:36.659653', '2020-02-07 00:46:36.659653', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:46:36.665919', '2020-02-07 00:46:36.665919', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:46:36.665919', '2020-02-07 00:46:36.665919', 298486374)[0m
  [1m[35m (144.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:46:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:46:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:46:36 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:46:37.005147"], ["updated_at", "2020-02-07 00:46:37.005147"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.7ms)
Completed 200 OK in 10ms (Views: 2.6ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:46:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:46:37 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (2.0ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:46:37.043939"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 17ms (Views: 0.9ms | ActiveRecord: 2.9ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:46:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:46:37 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:46:37.061938"], ["updated_at", "2020-02-07 00:46:37.061938"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:46:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:46:37 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.4ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (4.9ms)
Completed 200 OK in 7ms (Views: 4.4ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:46:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:46:37 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.5ms)
Completed 200 OK in 13ms (Views: 8.8ms | ActiveRecord: 2.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:46:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:46:37 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (4.2ms)
Completed 200 OK in 6ms (Views: 3.5ms | ActiveRecord: 1.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:46:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:46:37 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.6ms)
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:46:37 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (4.0ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:47:06.054098', '2020-02-07 00:47:06.054098', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:47:06.054098', '2020-02-07 00:47:06.054098', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:47:06.061237', '2020-02-07 00:47:06.061237', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:47:06.061237', '2020-02-07 00:47:06.061237', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:47:06.066827', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:47:06.066827', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:47:06.072752', '2020-02-07 00:47:06.072752', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:47:06.072752', '2020-02-07 00:47:06.072752', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:47:06.072752', '2020-02-07 00:47:06.072752', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:47:06.078995', '2020-02-07 00:47:06.078995', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:47:06.078995', '2020-02-07 00:47:06.078995', 298486374)[0m
  [1m[35m (157.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:47:06 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT "notebooks".* FROM "notebooks"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:48:18 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:48:18 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:48:18.919531"], ["updated_at", "2020-02-07 00:48:18.919531"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.8ms)
Completed 200 OK in 11ms (Views: 2.8ms | ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:48:18 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:48:18 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.1ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (1.5ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (12.5ms)
Completed 200 OK in 15ms (Views: 9.6ms | ActiveRecord: 3.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:48:18 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:48:18 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (6.4ms)
Completed 200 OK in 8ms (Views: 5.6ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:48:18 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:48:18 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.7ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:48:19 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.9ms)
Completed 200 OK in 7ms (Views: 5.7ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:48:19 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:48:19 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:48:19.030726"], ["updated_at", "2020-02-07 00:48:19.030726"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 5ms (Views: 0.9ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:48:19 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:48:19 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:48:19.047947"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.4ms)
Completed 200 OK in 5ms (Views: 0.7ms | ActiveRecord: 0.7ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:48:19 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:48:19 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.0ms)
Completed 200 OK in 4ms (Views: 1.8ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:48:57.559505', '2020-02-07 00:48:57.559505', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:48:57.559505', '2020-02-07 00:48:57.559505', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:48:57.566506', '2020-02-07 00:48:57.566506', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:48:57.566506', '2020-02-07 00:48:57.566506', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:48:57.571951', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:48:57.571951', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:48:57.578104', '2020-02-07 00:48:57.578104', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:48:57.578104', '2020-02-07 00:48:57.578104', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:48:57.578104', '2020-02-07 00:48:57.578104', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:48:57.584219', '2020-02-07 00:48:57.584219', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:48:57.584219', '2020-02-07 00:48:57.584219', 298486374)[0m
  [1m[35m (126.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:48:57 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.2ms)
Completed 200 OK in 13ms (Views: 7.9ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:48:57 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:48:57 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (2.5ms)
Completed 200 OK in 6ms (Views: 2.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:48:57 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:48:57 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.6ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (1.7ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (24.3ms)
Completed 200 OK in 27ms (Views: 20.8ms | ActiveRecord: 4.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:48:57 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:48:57 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (3.3ms)
Completed 200 OK in 5ms (Views: 2.6ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:48:57 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:48:57 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:48:57.954499"], ["updated_at", "2020-02-07 00:48:57.954499"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.4ms)
Completed 200 OK in 8ms (Views: 1.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:48:57 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:48:57 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.5ms)
Completed 200 OK in 5ms (Views: 2.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:48:57 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:48:57 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:48:57.988526"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 1.0ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:48:57 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:48:58 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:49:12.169202', '2020-02-07 00:49:12.169202', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:49:12.169202', '2020-02-07 00:49:12.169202', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:49:12.176571', '2020-02-07 00:49:12.176571', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:49:12.176571', '2020-02-07 00:49:12.176571', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:49:12.183079', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:49:12.183079', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:49:12.188610', '2020-02-07 00:49:12.188610', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:49:12.188610', '2020-02-07 00:49:12.188610', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:49:12.188610', '2020-02-07 00:49:12.188610', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:49:12.194544', '2020-02-07 00:49:12.194544', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:49:12.194544', '2020-02-07 00:49:12.194544', 298486374)[0m
  [1m[35m (997.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:49:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:49:13 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.1ms)
Completed 200 OK in 14ms (Views: 10.5ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:49:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:49:13 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.6ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:49:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:49:13 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (20.8ms)
Completed 200 OK in 24ms (Views: 18.5ms | ActiveRecord: 3.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:49:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:49:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:49:13 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.8ms)
Completed 200 OK in 7ms (Views: 5.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:49:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:49:13 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:49:13.463911"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.4ms)
Completed 200 OK in 6ms (Views: 1.0ms | ActiveRecord: 1.1ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:49:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:49:13 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:49:13.482103"], ["updated_at", "2020-02-07 00:49:13.482103"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:49:13 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:49:13 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.0ms)
Completed 200 OK in 4ms (Views: 1.9ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:49:35.208298', '2020-02-07 00:49:35.208298', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:49:35.208298', '2020-02-07 00:49:35.208298', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:49:35.215789', '2020-02-07 00:49:35.215789', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:49:35.215789', '2020-02-07 00:49:35.215789', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:49:35.221798', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:49:35.221798', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:49:35.227562', '2020-02-07 00:49:35.227562', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:49:35.227562', '2020-02-07 00:49:35.227562', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:49:35.227562', '2020-02-07 00:49:35.227562', 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:49:35.233807', '2020-02-07 00:49:35.233807', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:49:35.233807', '2020-02-07 00:49:35.233807', 298486374)[0m
  [1m[35m (589.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:49:35 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:49:35 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (13.5ms)
Completed 200 OK in 18ms (Views: 12.7ms | ActiveRecord: 3.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:49:35 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:49:35 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (6.1ms)
Completed 200 OK in 8ms (Views: 5.2ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:49:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:49:36 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.6ms)
Completed 200 OK in 5ms (Views: 1.6ms | ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:49:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mLearnNote Load (0.1ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:49:36 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:49:36.051148"], ["updated_at", "2020-02-07 00:49:36.051148"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.8ms)
Completed 200 OK in 8ms (Views: 1.4ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:49:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:49:36 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:49:36.073006"], ["updated_at", "2020-02-07 00:49:36.073006"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484987], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.6ms)
Completed 200 OK in 6ms (Views: 0.9ms | ActiveRecord: 1.3ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:49:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:49:36 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:49:36.098077"], ["updated_at", "2020-02-07 00:49:36.098077"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 8ms (Views: 0.9ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:49:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:49:36 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:49:36.116682"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.4ms)
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 1.1ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:49:36 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:49:36 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (3.1ms)
Completed 200 OK in 5ms (Views: 3.0ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:49:36 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (12.0ms)
Completed 200 OK in 13ms (Views: 11.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:50:10.346294', '2020-02-07 00:50:10.346294', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:50:10.346294', '2020-02-07 00:50:10.346294', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:50:10.353650', '2020-02-07 00:50:10.353650', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:50:10.353650', '2020-02-07 00:50:10.353650', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:50:10.359263', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:50:10.359263', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:50:10.365108', '2020-02-07 00:50:10.365108', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:50:10.365108', '2020-02-07 00:50:10.365108', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:50:10.365108', '2020-02-07 00:50:10.365108', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:50:10.371429', '2020-02-07 00:50:10.371429', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:50:10.371429', '2020-02-07 00:50:10.371429', 298486374)[0m
  [1m[35m (22.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:50:10 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:50:37 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:50:37.621170"], ["updated_at", "2020-02-07 00:50:37.621170"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.9ms)
Completed 200 OK in 22ms (Views: 3.0ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:50:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:50:37 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:50:37.644492"], ["updated_at", "2020-02-07 00:50:37.644492"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484987], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.5ms)
Completed 200 OK in 5ms (Views: 0.8ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:50:37 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.4ms)
Completed 200 OK in 9ms (Views: 7.1ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:50:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:50:37 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:50:37.685154"], ["updated_at", "2020-02-07 00:50:37.685154"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.4ms)
Completed 200 OK in 8ms (Views: 1.1ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:50:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:50:37 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:50:37.703149"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 1.0ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:50:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:50:37 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.2ms)
Completed 200 OK in 4ms (Views: 2.1ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (1.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:50:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:50:37 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.9ms)
Completed 200 OK in 14ms (Views: 9.3ms | ActiveRecord: 2.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:50:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:50:37 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (3.3ms)
Completed 200 OK in 5ms (Views: 2.8ms | ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:50:37 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:50:37 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.9ms)
Completed 200 OK in 4ms (Views: 1.9ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:51:29.681427', '2020-02-07 00:51:29.681427', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:51:29.681427', '2020-02-07 00:51:29.681427', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:51:29.688490', '2020-02-07 00:51:29.688490', 185728873)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:51:29.688490', '2020-02-07 00:51:29.688490', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:51:29.693846', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:51:29.693846', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:51:29.699819', '2020-02-07 00:51:29.699819', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:51:29.699819', '2020-02-07 00:51:29.699819', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:51:29.699819', '2020-02-07 00:51:29.699819', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:51:29.705856', '2020-02-07 00:51:29.705856', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:51:29.705856', '2020-02-07 00:51:29.705856', 298486374)[0m
  [1m[35m (1070.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:51:30 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:51:30 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (13.7ms)
Completed 200 OK in 19ms (Views: 12.8ms | ActiveRecord: 2.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:51:30 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:51:30 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (5.9ms)
Completed 200 OK in 8ms (Views: 5.2ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:51:30 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:51:30 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.6ms)
Completed 200 OK in 5ms (Views: 1.8ms | ActiveRecord: 2.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:51:30 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.7ms)
Completed 200 OK in 7ms (Views: 5.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:51:31 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:51:31 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:51:31.019785"], ["updated_at", "2020-02-07 00:51:31.019785"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 8ms (Views: 0.9ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:51:31 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:51:31 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:51:31.037741"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 1.1ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:51:31 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:51:31 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.1ms)
Completed 200 OK in 4ms (Views: 1.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:51:31 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:51:31 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:51:31.074231"], ["updated_at", "2020-02-07 00:51:31.074231"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.7ms)
Completed 200 OK in 7ms (Views: 1.3ms | ActiveRecord: 1.4ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:51:31 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:51:31 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (1.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:51:31.103202"], ["updated_at", "2020-02-07 00:51:31.103202"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484987], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.6ms)
Completed 200 OK in 14ms (Views: 1.0ms | ActiveRecord: 2.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:51:59.055417', '2020-02-07 00:51:59.055417', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:51:59.055417', '2020-02-07 00:51:59.055417', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:51:59.063049', '2020-02-07 00:51:59.063049', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:51:59.063049', '2020-02-07 00:51:59.063049', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:51:59.068555', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:51:59.068555', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:51:59.074151', '2020-02-07 00:51:59.074151', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:51:59.074151', '2020-02-07 00:51:59.074151', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:51:59.074151', '2020-02-07 00:51:59.074151', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:51:59.081141', '2020-02-07 00:51:59.081141', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:51:59.081141', '2020-02-07 00:51:59.081141', 298486374)[0m
  [1m[35m (32.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:51:59 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:51:59 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:51:59.260372"], ["updated_at", "2020-02-07 00:51:59.260372"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.7ms)
Completed 200 OK in 10ms (Views: 2.4ms | ActiveRecord: 1.6ms)
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:52:47 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:52:47 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:52:47.358972"], ["updated_at", "2020-02-07 00:52:47.358972"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484987], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.7ms)
Completed 200 OK in 7ms (Views: 1.1ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:52:47 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:52:47 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:52:47.386355"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.4ms)
Completed 200 OK in 6ms (Views: 1.0ms | ActiveRecord: 1.1ms)
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:52:47 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:52:47 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:52:47.403063"], ["updated_at", "2020-02-07 00:52:47.403063"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:52:47 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:52:47 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (5.3ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:52:47 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:52:47 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (20.3ms)
Completed 200 OK in 24ms (Views: 18.5ms | ActiveRecord: 2.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:52:47 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:52:47 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.5ms)
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:52:47 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:52:47 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (4.6ms)
Completed 200 OK in 6ms (Views: 3.8ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:52:47 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (4.2ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:52:56.107757', '2020-02-07 00:52:56.107757', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:52:56.107757', '2020-02-07 00:52:56.107757', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:52:56.114915', '2020-02-07 00:52:56.114915', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:52:56.114915', '2020-02-07 00:52:56.114915', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:52:56.120404', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:52:56.120404', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:52:56.125955', '2020-02-07 00:52:56.125955', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:52:56.125955', '2020-02-07 00:52:56.125955', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:52:56.125955', '2020-02-07 00:52:56.125955', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:52:56.132366', '2020-02-07 00:52:56.132366', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:52:56.132366', '2020-02-07 00:52:56.132366', 298486374)[0m
  [1m[35m (493.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:52:56 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:52:56 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.6ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (13.7ms)
Completed 200 OK in 19ms (Views: 13.1ms | ActiveRecord: 2.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:52:56 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:52:56 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (6.2ms)
Completed 200 OK in 8ms (Views: 5.4ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:52:56 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:52:56 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.6ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:52:56 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:52:56 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:52:56.850792"], ["updated_at", "2020-02-07 00:52:56.850792"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.7ms)
Completed 200 OK in 7ms (Views: 1.3ms | ActiveRecord: 1.4ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:52:59 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:52:59 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:52:59.025765"], ["updated_at", "2020-02-07 00:52:59.025765"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484987], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.5ms)
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:52:59 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.0ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:52:59 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:52:59 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:52:59.072561"], ["id", 178234897]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.6ms)
Completed 200 OK in 15ms (Views: 1.4ms | ActiveRecord: 2.0ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:52:59 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:52:59 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:52:59.090797"], ["updated_at", "2020-02-07 00:52:59.090797"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:52:59 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:52:59 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.0ms)
Completed 200 OK in 4ms (Views: 1.9ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:54:06.786338', '2020-02-07 00:54:06.786338', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:54:06.786338', '2020-02-07 00:54:06.786338', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:54:06.793766', '2020-02-07 00:54:06.793766', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:54:06.793766', '2020-02-07 00:54:06.793766', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:54:06.799450', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:54:06.799450', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:54:06.805442', '2020-02-07 00:54:06.805442', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:54:06.805442', '2020-02-07 00:54:06.805442', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:54:06.805442', '2020-02-07 00:54:06.805442', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:54:06.811908', '2020-02-07 00:54:06.811908', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:54:06.811908', '2020-02-07 00:54:06.811908', 298486374)[0m
  [1m[35m (540.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:54:07 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.2ms)
Completed 200 OK in 14ms (Views: 8.3ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:54:07 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:54:07 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:54:07.524717"], ["id", 178234897]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 8ms (Views: 1.0ms | ActiveRecord: 1.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:54:07 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:54:07 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.1ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (2.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:54:07 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:54:07 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:54:07.568987"], ["updated_at", "2020-02-07 00:54:07.568987"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.4ms)
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:54:07 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:54:07 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (2.5ms)
Completed 200 OK in 5ms (Views: 2.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:54:07 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:54:07 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.5ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (13.7ms)
Completed 200 OK in 16ms (Views: 11.4ms | ActiveRecord: 3.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:54:07 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:54:07 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (3.4ms)
Completed 200 OK in 5ms (Views: 2.5ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:54:07 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[36mLearnNote Load (0.1ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:54:07 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:54:07.652737"], ["updated_at", "2020-02-07 00:54:07.652737"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.7ms)
Completed 200 OK in 7ms (Views: 1.3ms | ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:54:07 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:54:07 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:54:07.671600"], ["updated_at", "2020-02-07 00:54:07.671600"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (2.1ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484987], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.5ms)
Completed 200 OK in 15ms (Views: 0.8ms | ActiveRecord: 3.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:55:31.080092', '2020-02-07 00:55:31.080092', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:55:31.080092', '2020-02-07 00:55:31.080092', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:55:31.090107', '2020-02-07 00:55:31.090107', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:55:31.090107', '2020-02-07 00:55:31.090107', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:55:31.096642', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:55:31.096642', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:55:31.103487', '2020-02-07 00:55:31.103487', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:55:31.103487', '2020-02-07 00:55:31.103487', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:55:31.103487', '2020-02-07 00:55:31.103487', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:55:31.111234', '2020-02-07 00:55:31.111234', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:55:31.111234', '2020-02-07 00:55:31.111234', 298486374)[0m
  [1m[35m (988.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:32 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:55:32 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.5ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (7.8ms)
Completed 200 OK in 12ms (Views: 8.6ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:32 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:55:32 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:55:32.274577"], ["updated_at", "2020-02-07 00:55:32.274577"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.4ms)
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:32 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.4ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:55:32 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:55:32.292280"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 1.0ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (2.0ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:55:32 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (6.3ms)
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:32 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:55:32 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (2.5ms)
Completed 200 OK in 5ms (Views: 2.7ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:32 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:55:32 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (16.5ms)
Completed 200 OK in 19ms (Views: 13.9ms | ActiveRecord: 3.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:32 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:55:32 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (3.4ms)
Completed 200 OK in 5ms (Views: 2.6ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:32 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:55:32 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"268784245", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "learn_notes" SET "status" = $1, "updated_at" = $2 WHERE "learn_notes"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:55:32.406451"], ["id", 524266083]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.8ms)
Completed 200 OK in 7ms (Views: 1.4ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:32 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[36mLearnNote Load (0.1ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:55:32 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:55:32.428306"], ["updated_at", "2020-02-07 00:55:32.428306"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (1.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.6ms)
Completed 200 OK in 13ms (Views: 0.9ms | ActiveRecord: 2.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:55:40.541226', '2020-02-07 00:55:40.541226', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:55:40.541226', '2020-02-07 00:55:40.541226', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:55:40.548204', '2020-02-07 00:55:40.548204', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:55:40.548204', '2020-02-07 00:55:40.548204', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:55:40.553841', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:55:40.553841', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:55:40.559508', '2020-02-07 00:55:40.559508', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:55:40.559508', '2020-02-07 00:55:40.559508', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:55:40.559508', '2020-02-07 00:55:40.559508', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:55:40.565553', '2020-02-07 00:55:40.565553', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:55:40.565553', '2020-02-07 00:55:40.565553', 298486374)[0m
  [1m[35m (204.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:40 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:55:40 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:55:40.921871"], ["updated_at", "2020-02-07 00:55:40.921871"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.9ms)
Completed 200 OK in 10ms (Views: 2.6ms | ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:40 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:55:40 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"268784245", "status"=>"grasped"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "learn_notes" SET "status" = $1, "updated_at" = $2 WHERE "learn_notes"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:55:40.946808"], ["id", 524266083]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.5ms)
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:40 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:55:40 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.1ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (12.2ms)
Completed 200 OK in 25ms (Views: 19.2ms | ActiveRecord: 3.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:40 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:55:40 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (6.1ms)
Completed 200 OK in 8ms (Views: 5.3ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:41 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:55:41 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (2.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:41 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:55:41 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:55:41.043693"], ["updated_at", "2020-02-07 00:55:41.043693"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 8ms (Views: 0.9ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:41 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:55:41 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:55:41.062065"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 1.1ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:41 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:55:41 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (3.5ms)
Completed 200 OK in 5ms (Views: 3.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:55:41 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (1.7ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (12.9ms)
Completed 200 OK in 14ms (Views: 11.2ms | ActiveRecord: 2.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:55:51.029220', '2020-02-07 00:55:51.029220', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:55:51.029220', '2020-02-07 00:55:51.029220', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:55:51.036361', '2020-02-07 00:55:51.036361', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:55:51.036361', '2020-02-07 00:55:51.036361', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:55:51.041870', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:55:51.041870', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:55:51.047746', '2020-02-07 00:55:51.047746', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:55:51.047746', '2020-02-07 00:55:51.047746', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:55:51.047746', '2020-02-07 00:55:51.047746', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:55:51.053821', '2020-02-07 00:55:51.053821', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:55:51.053821', '2020-02-07 00:55:51.053821', 298486374)[0m
  [1m[35m (23.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:55:51 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.3ms)
Completed 200 OK in 13ms (Views: 7.8ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:51 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[36mLearnNote Load (0.1ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:55:51 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:55:51.252496"], ["updated_at", "2020-02-07 00:55:51.252496"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.7ms)
Completed 200 OK in 9ms (Views: 1.3ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:51 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:55:51 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"268784245", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "learn_notes" SET "status" = $1, "updated_at" = $2 WHERE "learn_notes"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:55:51.272490"], ["id", 524266083]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.5ms)
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 1.6ms)
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:51 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:55:51 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:55:51.307429"], ["updated_at", "2020-02-07 00:55:51.307429"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 8ms (Views: 0.9ms | ActiveRecord: 1.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:51 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:55:51 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.1ms)
Completed 200 OK in 4ms (Views: 1.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:51 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:55:51 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:55:51.340606"], ["id", 178234897]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.4ms)
Completed 200 OK in 5ms (Views: 0.7ms | ActiveRecord: 1.1ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:51 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:55:51 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.5ms)
Completed 200 OK in 14ms (Views: 8.6ms | ActiveRecord: 3.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:51 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:55:51 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (3.6ms)
Completed 200 OK in 5ms (Views: 2.9ms | ActiveRecord: 1.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:55:51 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:55:51 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (1.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.8ms)
Completed 200 OK in 12ms (Views: 1.8ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:57:13.925468', '2020-02-07 00:57:13.925468', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:57:13.925468', '2020-02-07 00:57:13.925468', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:57:13.932629', '2020-02-07 00:57:13.932629', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:57:13.932629', '2020-02-07 00:57:13.932629', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:57:13.938257', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:57:13.938257', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:57:13.944232', '2020-02-07 00:57:13.944232', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:57:13.944232', '2020-02-07 00:57:13.944232', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:57:13.944232', '2020-02-07 00:57:13.944232', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:57:13.950636', '2020-02-07 00:57:13.950636', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:57:13.950636', '2020-02-07 00:57:13.950636', 298486374)[0m
  [1m[35m (41.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:57:14 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:57:14 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"actived"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:57:14.153486"], ["updated_at", "2020-02-07 00:57:14.153486"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 10ms (Views: 2.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:57:14 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:57:14 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:57:14.174286"], ["id", 178234897]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 1.3ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:57:14 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:57:14 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.4ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (4.7ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (1.5ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:57:14 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.4ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (6.0ms)
Completed 200 OK in 8ms (Views: 5.9ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:57:14 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:57:14 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:57:14.244668"], ["updated_at", "2020-02-07 00:57:14.244668"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (1.1ms)
Completed 200 OK in 8ms (Views: 1.8ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:57:14 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:57:14 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"268784245", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "learn_notes" SET "status" = $1, "updated_at" = $2 WHERE "learn_notes"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:57:14.264442"], ["id", 524266083]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.5ms)
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:57:14 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:57:14 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.8ms)
Completed 200 OK in 14ms (Views: 9.2ms | ActiveRecord: 2.7ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:57:14 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:57:14 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (3.4ms)
Completed 200 OK in 5ms (Views: 2.6ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:57:14 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:57:14 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (1.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (9.7ms)
Completed 200 OK in 12ms (Views: 8.7ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:57:39.061379', '2020-02-07 00:57:39.061379', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 00:57:39.061379', '2020-02-07 00:57:39.061379', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 00:57:39.068519', '2020-02-07 00:57:39.068519', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 00:57:39.068519', '2020-02-07 00:57:39.068519', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 00:57:39.074191', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 00:57:39.074191', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 00:57:39.080220', '2020-02-07 00:57:39.080220', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 00:57:39.080220', '2020-02-07 00:57:39.080220', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 00:57:39.080220', '2020-02-07 00:57:39.080220', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 00:57:39.086435', '2020-02-07 00:57:39.086435', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 00:57:39.086435', '2020-02-07 00:57:39.086435', 298486374)[0m
  [1m[35m (210.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:57:39 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:57:39 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:57:39.447396"], ["updated_at", "2020-02-07 00:57:39.447396"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.4ms)
Completed 200 OK in 10ms (Views: 2.1ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:57:39 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 08:57:39 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:57:39.468316"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 1.0ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:57:39 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 08:57:39 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.4ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (4.7ms)
Completed 200 OK in 7ms (Views: 4.3ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (1.5ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:57:39 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 08:57:39 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (9.6ms)
Completed 200 OK in 12ms (Views: 9.0ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:57:39 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 08:57:39 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.2ms)
Completed 200 OK in 12ms (Views: 8.0ms | ActiveRecord: 2.8ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:57:39 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 08:57:39 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.6ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:57:39 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[36mLearnNote Load (0.1ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:57:39 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 00:57:39.582511"], ["updated_at", "2020-02-07 00:57:39.582511"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.7ms)
Completed 200 OK in 8ms (Views: 1.3ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 08:57:39 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 08:57:39 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"268784245", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "learn_notes" SET "status" = $1, "updated_at" = $2 WHERE "learn_notes"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 00:57:39.600477"], ["id", 524266083]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.9ms)
Completed 200 OK in 6ms (Views: 1.3ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 08:57:39 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (1.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (12.8ms)
Completed 200 OK in 14ms (Views: 11.7ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 01:03:43.857086', '2020-02-07 01:03:43.857086', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 01:03:43.857086', '2020-02-07 01:03:43.857086', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 01:03:43.864092', '2020-02-07 01:03:43.864092', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 01:03:43.864092', '2020-02-07 01:03:43.864092', 548926451)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 01:03:43.869578', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 01:03:43.869578', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 01:03:43.875646', '2020-02-07 01:03:43.875646', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 01:03:43.875646', '2020-02-07 01:03:43.875646', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 01:03:43.875646', '2020-02-07 01:03:43.875646', 909751057)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 01:03:43.881854', '2020-02-07 01:03:43.881854', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 01:03:43.881854', '2020-02-07 01:03:43.881854', 298486374)[0m
  [1m[35m (266.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:03:44 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 09:03:44 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (13.5ms)
Completed 200 OK in 19ms (Views: 12.5ms | ActiveRecord: 3.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:03:44 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 09:03:44 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (5.9ms)
Completed 200 OK in 8ms (Views: 5.1ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:03:44 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 09:03:44 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.6ms)
Completed 200 OK in 5ms (Views: 1.6ms | ActiveRecord: 2.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 09:03:44 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.7ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:03:44 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 09:03:44 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 01:03:44.422578"], ["id", 178234897]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.5ms)
Completed 200 OK in 7ms (Views: 1.3ms | ActiveRecord: 1.5ms)
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:03:44 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 09:03:44 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.1ms)
Completed 200 OK in 4ms (Views: 1.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:03:44 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 09:03:44 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 01:03:44.455737"], ["updated_at", "2020-02-07 01:03:44.455737"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.4ms)
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:03:44 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 09:03:44 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 01:03:44.477155"], ["updated_at", "2020-02-07 01:03:44.477155"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.7ms)
Completed 200 OK in 7ms (Views: 1.3ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:03:44 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 09:03:44 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"268784245", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "learn_notes" SET "status" = $1, "updated_at" = $2 WHERE "learn_notes"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 01:03:44.496304"], ["id", 524266083]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (1.9ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.5ms)
Completed 200 OK in 15ms (Views: 0.9ms | ActiveRecord: 3.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1832.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "catbook_test"[0m
  [1m[35m (1870.6ms)[0m  [1m[35mCREATE DATABASE "catbook_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35mSQL (42.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "btree_gin"[0m
  [1m[35mSQL (59.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "btree_gist"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "books" CASCADE[0m
  [1m[35m (148.0ms)[0m  [1m[35mCREATE TABLE "books" ("id" bigserial primary key, "name" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "books_words" CASCADE[0m
  [1m[35m (21.5ms)[0m  [1m[35mCREATE TABLE "books_words" ("book_id" bigint, "word_id" bigint)[0m
  [1m[35m (96.7ms)[0m  [1m[35mCREATE  INDEX  "index_books_words_on_book_id" ON "books_words"  ("book_id")[0m
  [1m[35m (65.4ms)[0m  [1m[35mCREATE  INDEX  "index_books_words_on_word_id" ON "books_words"  ("word_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "learn_notes" CASCADE[0m
  [1m[35m (90.7ms)[0m  [1m[35mCREATE TABLE "learn_notes" ("id" bigserial primary key, "status" integer NOT NULL, "user_id" integer NOT NULL, "word_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (77.3ms)[0m  [1m[35mCREATE  INDEX  "index_learn_notes_on_status" ON "learn_notes"  ("status")[0m
  [1m[35m (78.3ms)[0m  [1m[35mCREATE  INDEX  "index_learn_notes_on_user_id" ON "learn_notes"  ("user_id")[0m
  [1m[35m (77.6ms)[0m  [1m[35mCREATE  INDEX  "index_learn_notes_on_word_id" ON "learn_notes"  ("word_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "notebooks" CASCADE[0m
  [1m[35m (79.6ms)[0m  [1m[35mCREATE TABLE "notebooks" ("id" bigserial primary key, "status" integer NOT NULL, "user_id" integer NOT NULL, "word_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (77.5ms)[0m  [1m[35mCREATE  INDEX  "index_notebooks_on_status" ON "notebooks"  ("status")[0m
  [1m[35m (112.7ms)[0m  [1m[35mCREATE  INDEX  "index_notebooks_on_user_id" ON "notebooks"  ("user_id")[0m
  [1m[35m (412.0ms)[0m  [1m[35mCREATE  INDEX  "index_notebooks_on_word_id" ON "notebooks"  ("word_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (196.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying NOT NULL, "password" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (65.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "words" CASCADE[0m
  [1m[35m (136.7ms)[0m  [1m[35mCREATE TABLE "words" ("id" bigserial primary key, "name_a" character varying NOT NULL, "name_b" character varying NOT NULL, "sounds_a" character varying NOT NULL, "sounds_b" character varying NOT NULL, "explanation" text NOT NULL, "example" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (35.8ms)[0m  [1m[35mCREATE  INDEX  "index_words_on_name_a" ON "words" USING gin ("name_a")[0m
  [1m[35m (25.8ms)[0m  [1m[35mCREATE  INDEX  "index_words_on_name_b" ON "words" USING gin ("name_b")[0m
  [1m[35m (155.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (28.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200206160916)[0m
  [1m[35m (29.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20200206154827),
(20200206133218),
(20200206155924),
(20200206160854),
(20200206160443),
(20200206155428);

[0m
  [1m[35m (162.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2020-02-07 01:08:26.550109"], ["updated_at", "2020-02-07 01:08:26.550109"]]
  [1m[35m (30.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 01:08:26.678014', '2020-02-07 01:08:26.678014', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 01:08:26.678014', '2020-02-07 01:08:26.678014', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 01:08:26.685406', '2020-02-07 01:08:26.685406', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 01:08:26.685406', '2020-02-07 01:08:26.685406', 548926451)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 01:08:26.691157', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 01:08:26.691157', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 01:08:26.697331', '2020-02-07 01:08:26.697331', 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 01:08:26.697331', '2020-02-07 01:08:26.697331', 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 01:08:26.697331', '2020-02-07 01:08:26.697331', 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 01:08:26.703743', '2020-02-07 01:08:26.703743', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 01:08:26.703743', '2020-02-07 01:08:26.703743', 298486374)[0m
  [1m[35m (34.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:08:26 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 09:08:26 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 01:08:26.887128"], ["updated_at", "2020-02-07 01:08:26.887128"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 10ms (Views: 2.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:08:26 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 09:08:26 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 01:08:26.908593"], ["id", 178234897]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.4ms)
Completed 200 OK in 5ms (Views: 0.7ms | ActiveRecord: 1.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:08:26 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 09:08:26 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.5ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (4.8ms)
Completed 200 OK in 7ms (Views: 4.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:08:26 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 09:08:26 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 01:08:26.964331"], ["updated_at", "2020-02-07 01:08:26.964331"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.8ms)
Completed 200 OK in 9ms (Views: 1.4ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:08:26 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 09:08:26 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"268784245", "status"=>"grasped"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "learn_notes" SET "status" = $1, "updated_at" = $2 WHERE "learn_notes"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 01:08:26.983563"], ["id", 524266083]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.5ms)
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:08:26 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 09:08:26 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (2.2ms)
Completed 200 OK in 5ms (Views: 2.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:08:27 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 09:08:27 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.2ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.5ms)
Completed 200 OK in 13ms (Views: 8.1ms | ActiveRecord: 3.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:08:27 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 09:08:27 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (4.7ms)
Completed 200 OK in 6ms (Views: 3.9ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 09:08:27 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (5.5ms)
Completed 200 OK in 14ms (Views: 12.8ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 01:09:05.705037', '2020-02-07 01:09:05.705037', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 01:09:05.705037', '2020-02-07 01:09:05.705037', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 01:09:05.712000', '2020-02-07 01:09:05.712000', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 01:09:05.712000', '2020-02-07 01:09:05.712000', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 01:09:05.717581', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 01:09:05.717581', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 01:09:05.723548', '2020-02-07 01:09:05.723548', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 01:09:05.723548', '2020-02-07 01:09:05.723548', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 01:09:05.723548', '2020-02-07 01:09:05.723548', 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 01:09:05.729467', '2020-02-07 01:09:05.729467', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 01:09:05.729467', '2020-02-07 01:09:05.729467', 298486374)[0m
  [1m[35m (353.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 09:09:06 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.3ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (7.5ms)
Completed 200 OK in 13ms (Views: 8.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:09:06 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 2ms (ActiveRecord: 0.5ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 09:09:06 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (2.5ms)
Completed 200 OK in 6ms (Views: 2.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:09:06 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 09:09:06 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (1.7ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (24.2ms)
Completed 200 OK in 27ms (Views: 20.6ms | ActiveRecord: 4.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:09:06 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 09:09:06 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (3.6ms)
Completed 200 OK in 5ms (Views: 2.7ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:09:06 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 09:09:06 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 01:09:06.358500"], ["id", 178234897]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.5ms)
Completed 200 OK in 7ms (Views: 1.3ms | ActiveRecord: 1.4ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:09:06 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 09:09:06 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 01:09:06.376428"], ["updated_at", "2020-02-07 01:09:06.376428"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:09:06 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 09:09:06 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.1ms)
Completed 200 OK in 4ms (Views: 1.9ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:09:06 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[36mLearnNote Load (0.1ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 09:09:06 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 01:09:06.411255"], ["updated_at", "2020-02-07 01:09:06.411255"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.8ms)
Completed 200 OK in 7ms (Views: 1.4ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:09:06 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 09:09:06 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"268784245", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (1.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "learn_notes" SET "status" = $1, "updated_at" = $2 WHERE "learn_notes"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 01:09:06.440265"], ["id", 524266083]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.7ms)
Completed 200 OK in 15ms (Views: 1.1ms | ActiveRecord: 2.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3355.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "catbook_test"[0m
  [1m[35m (5826.8ms)[0m  [1m[35mCREATE DATABASE "catbook_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35mSQL (315.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "btree_gin"[0m
  [1m[35mSQL (82.6ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "btree_gist"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "books" CASCADE[0m
  [1m[35m (113.0ms)[0m  [1m[35mCREATE TABLE "books" ("id" bigserial primary key, "name" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "books_words" CASCADE[0m
  [1m[35m (21.2ms)[0m  [1m[35mCREATE TABLE "books_words" ("book_id" bigint, "word_id" bigint)[0m
  [1m[35m (74.9ms)[0m  [1m[35mCREATE  INDEX  "index_books_words_on_book_id" ON "books_words"  ("book_id")[0m
  [1m[35m (65.6ms)[0m  [1m[35mCREATE  INDEX  "index_books_words_on_word_id" ON "books_words"  ("word_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "learn_notes" CASCADE[0m
  [1m[35m (90.4ms)[0m  [1m[35mCREATE TABLE "learn_notes" ("id" bigserial primary key, "status" integer NOT NULL, "user_id" integer NOT NULL, "word_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (76.0ms)[0m  [1m[35mCREATE  INDEX  "index_learn_notes_on_status" ON "learn_notes"  ("status")[0m
  [1m[35m (77.6ms)[0m  [1m[35mCREATE  INDEX  "index_learn_notes_on_user_id" ON "learn_notes"  ("user_id")[0m
  [1m[35m (78.4ms)[0m  [1m[35mCREATE  INDEX  "index_learn_notes_on_word_id" ON "learn_notes"  ("word_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "notebooks" CASCADE[0m
  [1m[35m (67.6ms)[0m  [1m[35mCREATE TABLE "notebooks" ("id" bigserial primary key, "status" integer NOT NULL, "user_id" integer NOT NULL, "word_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (65.2ms)[0m  [1m[35mCREATE  INDEX  "index_notebooks_on_status" ON "notebooks"  ("status")[0m
  [1m[35m (77.5ms)[0m  [1m[35mCREATE  INDEX  "index_notebooks_on_user_id" ON "notebooks"  ("user_id")[0m
  [1m[35m (81.9ms)[0m  [1m[35mCREATE  INDEX  "index_notebooks_on_word_id" ON "notebooks"  ("word_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (136.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "username" character varying NOT NULL, "password" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (119.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_username" ON "users"  ("username")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "words" CASCADE[0m
  [1m[35m (159.7ms)[0m  [1m[35mCREATE TABLE "words" ("id" bigserial primary key, "name_a" character varying NOT NULL, "name_b" character varying NOT NULL, "sounds_a" character varying NOT NULL, "sounds_b" character varying NOT NULL, "explanation" text NOT NULL, "example" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (30.5ms)[0m  [1m[35mCREATE  INDEX  "index_words_on_name_a" ON "words" USING gin ("name_a")[0m
  [1m[35m (30.2ms)[0m  [1m[35mCREATE  INDEX  "index_words_on_name_b" ON "words" USING gin ("name_b")[0m
  [1m[35m (171.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (19.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200206160916)[0m
  [1m[35m (22.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20200206154827),
(20200206133218),
(20200206155924),
(20200206160854),
(20200206160443),
(20200206155428);

[0m
  [1m[35m (152.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2020-02-07 01:09:50.380514"], ["updated_at", "2020-02-07 01:09:50.380514"]]
  [1m[35m (22.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "books" DISABLE TRIGGER ALL;ALTER TABLE "books_words" DISABLE TRIGGER ALL;ALTER TABLE "learn_notes" DISABLE TRIGGER ALL;ALTER TABLE "notebooks" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "words" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "notebooks"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 01:09:50.497544', '2020-02-07 01:09:50.497544', 178234897, 980190962, 1000562403)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "created_at", "updated_at", "id", "user_id", "word_id") VALUES (0, '2020-02-07 01:09:50.497544', '2020-02-07 01:09:50.497544', 557427335, 980190962, 268784245)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "books"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('IELTS', '2020-02-07 01:09:50.504836', '2020-02-07 01:09:50.504836', 185728873)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "books" ("name", "created_at", "updated_at", "id") VALUES ('PTE', '2020-02-07 01:09:50.504836', '2020-02-07 01:09:50.504836', 548926451)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "learn_notes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2019-11-11', '2020-02-07 01:09:50.510466', 524266083, 980190962, 268784245)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "updated_at", "created_at", "id", "user_id", "word_id") VALUES (0, '2020-02-02', '2020-02-07 01:09:50.510466', 882484985, 980190962, 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "words"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('apple', 'ff', 'ap', 'ap', 'fruit', 'example sentence', '2020-02-07 01:09:50.516797', '2020-02-07 01:09:50.516797', 1000562403)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('cat', 'cat1', 'c', 'c', 'ccccat', NULL, '2020-02-07 01:09:50.516797', '2020-02-07 01:09:50.516797', 268784245)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "words" ("name_a", "name_b", "sounds_a", "sounds_b", "explanation", "example", "created_at", "updated_at", "id") VALUES ('dog', 'ap', 'd', 'd', 'ddddd', NULL, '2020-02-07 01:09:50.516797', '2020-02-07 01:09:50.516797', 909751057)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name1', 'pwd12345', '2020-02-07 01:09:50.523068', '2020-02-07 01:09:50.523068', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "password", "created_at", "updated_at", "id") VALUES ('name2', 'pwd12345', '2020-02-07 01:09:50.523068', '2020-02-07 01:09:50.523068', 298486374)[0m
  [1m[35m (21.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "books" ENABLE TRIGGER ALL;ALTER TABLE "books_words" ENABLE TRIGGER ALL;ALTER TABLE "learn_notes" ENABLE TRIGGER ALL;ALTER TABLE "notebooks" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "words" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
WordsControllerTest: test_index_search
--------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:09:50 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/api/v1/words?name=ap" for 127.0.0.1 at 2020-02-07 09:09:50 +0800
Processing by WordsController#index as JSON
  Parameters: {"name"=>"ap"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[36mWord Load (0.4ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE (name_a LIKE '%ap%' OR name_b LIKE '%ap%') ORDER BY CASE WHEN name_a = 'ap' THEN 1 WHEN name_b = 'ap' THEN 2 ElSE 3 END LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" IN (909751057, 1000562403)[0m
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (10.8ms)
Completed 200 OK in 16ms (Views: 11.6ms | ActiveRecord: 1.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------
WordsControllerTest: test_show
------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:09:50 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
Started GET "/api/v1/words/1000562403" for 127.0.0.1 at 2020-02-07 09:09:50 +0800
Processing by WordsController#show as JSON
  Parameters: {"id"=>"1000562403"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering words/show.json.jbuilder
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/show.json.jbuilder (1.8ms)
Completed 200 OK in 4ms (Views: 1.8ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
WordsControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.3ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:09:50 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
Started GET "/api/v1/words?book_id=185728873" for 127.0.0.1 at 2020-02-07 09:09:50 +0800
Processing by WordsController#index as JSON
  Parameters: {"book_id"=>"185728873"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  Rendering words/index.json.jbuilder
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT  DISTINCT "words"."id", l.updated_at AS alias_0 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 ORDER BY l.updated_at ASC LIMIT $2 OFFSET $3[0m  [["book_id", 185728873], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT "words"."id" AS t0_r0, "words"."name_a" AS t0_r1, "words"."name_b" AS t0_r2, "words"."sounds_a" AS t0_r3, "words"."sounds_b" AS t0_r4, "words"."explanation" AS t0_r5, "words"."example" AS t0_r6, "words"."created_at" AS t0_r7, "words"."updated_at" AS t0_r8, "learn_notes"."id" AS t1_r0, "learn_notes"."status" AS t1_r1, "learn_notes"."user_id" AS t1_r2, "learn_notes"."word_id" AS t1_r3, "learn_notes"."created_at" AS t1_r4, "learn_notes"."updated_at" AS t1_r5 FROM "words" LEFT OUTER JOIN "learn_notes" ON "learn_notes"."word_id" = "words"."id" INNER JOIN "books_words" ON "words"."id" = "books_words"."word_id" LEFT JOIN learn_notes as l on l.word_id = words.id and l.user_id = 980190962 WHERE "books_words"."book_id" = $1 AND "words"."id" IN (268784245, 909751057, 1000562403) ORDER BY l.updated_at ASC[0m  [["book_id", 185728873]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 268784245], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 909751057], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.4ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."word_id" = $1 AND "learn_notes"."user_id" = 980190962 LIMIT $2[0m  [["word_id", 1000562403], ["LIMIT", 1]]
  Rendered words/index.json.jbuilder (21.2ms)
Completed 200 OK in 24ms (Views: 18.9ms | ActiveRecord: 3.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
LearnNotesControllerTest: test_create_new_recorded
--------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:09:50 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "learn_notes" WHERE "learn_notes"."id" = $1[0m  [["id", 524266083]]
  [1m[36mLearnNote Load (0.3ms)[0m  [1m[34mSELECT "learn_notes".* FROM "learn_notes"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 09:09:50 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"1000562403", "status"=>"grasped"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "learn_notes" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 1], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 01:09:50.813160"], ["updated_at", "2020-02-07 01:09:50.813160"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 882484986], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.8ms)
Completed 200 OK in 8ms (Views: 1.4ms | ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
LearnNotesControllerTest: test_create_when_already_recorded
-----------------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:09:50 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
Started POST "/api/v1/learn_notes" for 127.0.0.1 at 2020-02-07 09:09:50 +0800
Processing by LearnNotesController#create as JSON
  Parameters: {"word_id"=>"268784245", "status"=>"grasped"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."user_id" = $1 AND "learn_notes"."word_id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["word_id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "learn_notes" SET "status" = $1, "updated_at" = $2 WHERE "learn_notes"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 01:09:50.832624"], ["id", 524266083]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLearnNote Load (0.2ms)[0m  [1m[34mSELECT  "learn_notes".* FROM "learn_notes" WHERE "learn_notes"."id" = $1 LIMIT $2[0m  [["id", 524266083], ["LIMIT", 1]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  Rendering learn_notes/create.json.jbuilder
  Rendered learn_notes/create.json.jbuilder (0.5ms)
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "learn_notes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------
BooksControllerTest: test_index
-------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/books" for 127.0.0.1 at 2020-02-07 09:09:50 +0800
Processing by BooksController#index as JSON
  Rendering books/index.json.jbuilder
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT  "books".* FROM "books" ORDER BY "books"."updated_at" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mHABTM_Words Load (0.2ms)[0m  [1m[34mSELECT "books_words".* FROM "books_words" WHERE "books_words"."book_id" IN (185728873, 548926451)[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245, 909751057)[0m
  Rendered books/index.json.jbuilder (4.9ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------
NotebooksControllerTest: test_create
------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:09:50 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
Started POST "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 09:09:50 +0800
Processing by NotebooksController#create as JSON
  Parameters: {"word_id"=>"1000562403"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "notebooks" ("status", "user_id", "word_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["status", 0], ["user_id", 980190962], ["word_id", 1000562403], ["created_at", "2020-02-07 01:09:50.871823"], ["updated_at", "2020-02-07 01:09:50.871823"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/create.json.jbuilder
  Rendered notebooks/create.json.jbuilder (0.3ms)
Completed 200 OK in 8ms (Views: 0.9ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "notebooks"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
NotebooksControllerTest: test_deleted
-------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:09:50 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
Started DELETE "/api/v1/notebooks/178234897" for 127.0.0.1 at 2020-02-07 09:09:50 +0800
Processing by NotebooksController#destroy as JSON
  Parameters: {"id"=>"178234897"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 AND "notebooks"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "notebooks" SET "status" = $1, "updated_at" = $2 WHERE "notebooks"."id" = $3[0m  [["status", 1], ["updated_at", "2020-02-07 01:09:50.889204"], ["id", 178234897]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering notebooks/destroy.json.jbuilder
  Rendered notebooks/destroy.json.jbuilder (0.3ms)
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 1.2ms)
  [1m[36mNotebook Load (0.2ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."id" = $1 LIMIT $2[0m  [["id", 178234897], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
NotebooksControllerTest: test_index
-----------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT  "books".* FROM "books" WHERE "books"."id" = $1 LIMIT $2[0m  [["id", 185728873], ["LIMIT", 1]]
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 1000562403], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 1000562403]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 268784245], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 268784245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWord Load (0.1ms)[0m  [1m[34mSELECT  "words".* FROM "words" WHERE "words"."id" = $1 LIMIT $2[0m  [["id", 909751057], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "books_words" ("book_id", "word_id") VALUES ($1, $2)[0m  [["book_id", 185728873], ["word_id", 909751057]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/api/v1/login?user%5Bpassword%5D=[FILTERED]&user%5Busername%5D=name1" for 127.0.0.1 at 2020-02-07 09:09:50 +0800
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"password"=>"[FILTERED]", "username"=>"name1"}}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (lower(username) = lower('name1') AND password = 'pwd12345') LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/api/v1
Completed 302 Found in 10ms (ActiveRecord: 1.5ms)
Started GET "/api/v1/notebooks" for 127.0.0.1 at 2020-02-07 09:09:50 +0800
Processing by NotebooksController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering notebooks/index.json.jbuilder
  [1m[36mNotebook Load (0.3ms)[0m  [1m[34mSELECT  "notebooks".* FROM "notebooks" WHERE "notebooks"."user_id" = $1 ORDER BY "notebooks"."updated_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 980190962], ["LIMIT", 5], ["OFFSET", 0]]
  [1m[36mWord Load (0.2ms)[0m  [1m[34mSELECT "words".* FROM "words" WHERE "words"."id" IN (1000562403, 268784245)[0m
  Rendered notebooks/index.json.jbuilder (2.1ms)
Completed 200 OK in 4ms (Views: 1.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
